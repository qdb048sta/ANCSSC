/*

 FullCalendar v1.5.1
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Apr 9 14:09:51 2011 -0700

*/
(function(a,b){function e(b){a.extend(!0,la,b)}function d(e,d,D){function ia(){e.addClass("fc");d.isRTL&&e.addClass("fc-rtl");d.theme&&e.addClass("ui-widget");J=a("<div class='fc-content' style='position:relative'/>").prependTo(e);P=new c(A,d);(X=P.render())&&e.prepend(X);k(d.defaultView);a(window).resize(t);0===a("body")[0].offsetWidth&&l();var b=a(".fc-view-"+d.defaultView,e).height();setTimeout(function(){a(".fc-view-search",e).css("height",b).hide()},200)}function l(){setTimeout(function(){y.start||
0===a("body")[0].offsetWidth||ea()},0)}function k(b){if(!y||b!=y.name){K++;ja();var d=y,c;d?((d.beforeHide||eb)(),Ka(J,J.height()),d.element.hide()):Ka(J,1);J.css("overflow","hidden");(y=ga[b])?y.element.show():y=ga[b]=new ma[b](c=Z=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(J),A);a("#b_search_cal").hasClass("ui-state-active")&&a("#b_search_cal").trigger("click");d&&P.deactivateButton(d.name);P.activateButton(b);ea();J.css("overflow","");d&&Ka(J,1);c||(y.afterShow||
eb)();K--}}function ea(a){if(0!==C.offsetWidth){K++;ja();ka===b&&n();var c=!1;!y.start||a||M<y.start||M>=y.end?(y.render(M,a||0),B(!0),c=!0):y.sizeDirty?(y.clearEvents(),B(),c=!0):y.eventsDirty&&(y.clearEvents(),c=!0);y.sizeDirty=!1;y.eventsDirty=!1;a=c;!d.lazyFetching||u(y.visStart,y.visEnd)?q():a&&v();ua=e.outerWidth();P.updateTitle(y.title);a=new Date;a>=y.start&&a<y.end?P.disableButton("today"):P.enableButton("today");K--;y.trigger("viewDisplay",C)}}function La(){ba();0!==C.offsetWidth&&(n(),
B(),ja(),y.clearEvents(),y.renderEvents(N),y.sizeDirty=!1)}function ba(){a.each(ga,function(a,b){b.sizeDirty=!0})}function n(){ka=d.contentHeight?d.contentHeight:d.height?d.height-(X?X.height():0)-Ca(J):Math.round(J.width()/Math.max(d.aspectRatio,.5))}function B(a){K++;y.setHeight(ka,a);Z&&(Z.css("position","relative"),Z=null);y.setWidth(J.width(),a);K--}function t(){if(!K)if(y.start){var a=++L;setTimeout(function(){a!=L||K||0===C.offsetWidth||ua==(ua=e.outerWidth())||(K++,La(),y.trigger("windowResize",
C),K--)},200)}else l()}function q(){w(y.visStart,y.visEnd)}function v(a){r();0!==C.offsetWidth&&(y.clearEvents(),y.renderEvents(N,a),y.eventsDirty=!1)}function r(){a.each(ga,function(a,b){b.eventsDirty=!0})}function ja(){y&&y.unselect()}var A=this;A.options=d;A.render=function(a){J?(n(),ba(),r(),ea(a)):ia()};A.destroy=function(){a(window).unbind("resize",t);P.destroy();J.remove();e.removeClass("fc fc-rtl ui-widget")};A.refetchEvents=q;A.reportEvents=function(a){N=a;v()};A.reportEventChange=function(a){v(a)};
A.rerenderEvents=v;A.changeView=k;A.select=function(a,d,c){y.select(a,d,c===b?!0:c)};A.unselect=ja;A.prev=function(){ea(-1)};A.next=function(){ea(1)};A.prevYear=function(){g(M,-1);ea()};A.nextYear=function(){g(M,1);ea()};A.today=function(){M=new Date;ea()};A.gotoDate=function(a,b,d){a instanceof Date?M=p(a):E(M,a,b,d);ea()};A.incrementDate=function(a,d,c){a!==b&&g(M,a);d!==b&&m(M,d);c!==b&&h(M,c);ea()};A.formatDate=function(a,b){return G(a,b,d)};A.formatDates=function(a,b,c){return na(a,b,c,d)};A.getDate=
function(){return p(M)};A.getView=function(){return y};A.option=function(a,c){if(c===b)return d[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)d[a]=c,La()};A.trigger=function(a,b){if(d[a])return d[a].apply(b||C,Array.prototype.slice.call(arguments,2))};f.call(A,d,D);var u=A.isFetchNeeded,w=A.fetchEvents,C=e[0],P,X,J,y,ga={},ua,ka,Z,L=0,K=0,M=new Date,N=[],H;E(M,d.year,d.month,d.date);d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,f=a(e);if(!f.parents(".fc").length){var S=
d.dropAccept;if(a.isFunction(S)?S.call(e,f):f.is(S))H=e,y.dragStart(H,b,c)}}).bind("dragstop",function(a,b){H&&(y.dragStop(H,a,b),H=null)})}function c(b,d){function c(e){var D=a("<td class='fc-header-"+e+"'/>");(e=d.header[e])&&a.each(e.split(" "),function(c){0<c&&D.append("<span class='fc-header-space'/>");var e;a.each(this.split(","),function(c,h){if("title"==h)D.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),e&&e.addClass(f+"-corner-right"),e=null;else{var g;b[h]?g=b[h]:ma[h]&&
(g=function(){ia.removeClass(f+"-state-hover");b.changeView(h)});if(g){var p=d.theme?Sa(d.buttonIcons,h):null,l=Sa(d.buttonText,h),ia=a("<span class='fc-button fc-button-"+h+" "+f+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(p?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+p+"'/></span>":l)+"</span><span class='fc-button-effect'><span></span></span></span></span>");ia&&(ia.click(function(){ia.hasClass(f+"-state-disabled")||g()}).mousedown(function(){ia.not("."+
f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){ia.removeClass(f+"-state-down")}).hover(function(){ia.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){ia.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(D),e||ia.addClass(f+"-corner-left"),e=ia)}}});e&&e.addClass(f+"-corner-right")});return D}this.render=function(){f=d.theme?"ui":"fc";if(d.header)return e=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(c("left")).append(c("center")).append(c("right")))};
this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var e=a([]),f}function f(d,c){function e(a,b){f(a,
function(d){if(b==E){if(d){for(var c=0;c<d.length;c++)d[c].source=a,g(d[c]);w=w.concat(d)}A--;A||B(w)}})}function f(b,c){var e,h=O.sourceFetchers,D;for(e=0;e<h.length;e++){D=h[e](b,q,v,c);if(!0===D)return;if("object"==typeof D){f(D,c);return}}if(e=b.events)a.isFunction(e)?(u++||ba("loading",null,!0),e(p(q),p(v),function(a){c(a);--u||ba("loading",null,!1)})):a.isArray(e)?c(e):c();else if(b.url){var g=b.success,qb=b.error,l=b.complete;e=a.extend({},b.data||{});h=Da(b.startParam,d.startParam);D=Da(b.endParam,
d.endParam);h&&(e[h]=Math.round(+q/1E3));D&&(e[D]=Math.round(+v/1E3));u++||ba("loading",null,!0);a.ajax(a.extend({},rb,b,{data:e,success:function(b){b=b||[];var d=Ma(g,this,arguments);a.isArray(d)&&(b=d);c(b)},error:function(){Ma(qb,this,arguments);c()},complete:function(){Ma(l,this,arguments);--u||ba("loading",null,!1)}}))}else c()}function h(b){a.isFunction(b)||a.isArray(b)?b={events:b}:"string"==typeof b&&(b={url:b});if("object"==typeof b){var c=b;c.className?"string"==typeof c.className&&(c.className=
c.className.split(/\s+/)):c.className=[];for(var d=O.sourceNormalizers,e=0;e<d.length;e++)d[e](c);t.push(b);return b}}function g(a){var c=a.source||{},e=Da(c.ignoreTimezone,d.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+sb++:a.id+"");a.date&&(a.start||(a.start=a.date),delete a.date);a._start=p(a.start=r(a.start,e));a.end=r(a.end,e);a.end&&a.end<=a.start&&(a.end=null);a._end=a.end?p(a.end):null;a.allDay===b&&(a.allDay=Da(c.allDayDefault,d.allDayDefault));a.className?"string"==typeof a.className&&(a.className=
a.className.split(/\s+/)):a.className=[]}function l(a,b){return a&&b&&m(a)==m(b)}function m(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!q||a<q||b>v};this.fetchEvents=function(a,b){q=a;v=b;w=[];var c=++E,d=t.length;A=d;for(var f=0;f<d;f++)e(t[f],c)};this.addEventSource=function(a){if(a=h(a))A++,e(a,E)};this.removeEventSource=function(b){t=a.grep(t,function(a){return!l(a,b)});w=a.grep(w,function(a){return!l(a.source,b)});B(w)};this.updateEvent=function(a){var b,
c=w.length,d,e=k().defaultEventEnd,f=a.start-a._start,S=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=w[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),d.end=a.end?d.end?new Date(+d.end+S):new Date(+e(d)+S):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroudColor=a.backgroudColor,d.borderColor=a.borderColor,d.textColor=a.textColor,g(d));g(a);B(w)};this.renderEvent=function(a,b){g(a);a.source||(b&&(n.events.push(a),a.source=
n),w.push(a));B(w)};this.removeEvents=function(b){if(b){if(!a.isFunction(b)){var d=b+"";b=function(a){return a._id==d}}w=a.grep(w,b,!0);for(c=0;c<t.length;c++)a.isArray(t[c].events)&&(t[c].events=a.grep(t[c].events,b,!0))}else{w=[];for(var c=0;c<t.length;c++)a.isArray(t[c].events)&&(t[c].events=[])}B(w)};this.clientEvents=function(b){return a.isFunction(b)?a.grep(w,b):b?(b+="",a.grep(w,function(a){return a._id==b})):w};this.normalizeEvent=g;for(var ba=this.trigger,k=this.getView,B=this.reportEvents,
n={events:[]},t=[n],q,v,E=0,A=0,u=0,w=[],C=0;C<c.length;C++)h(c[C])}function g(a,b,d){a.setFullYear(a.getFullYear()+b);d||q(a);return a}function m(a,b,d){if(+a){b=a.getMonth()+b;var c=p(a);c.setDate(1);c.setMonth(b);a.setMonth(b);for(d||q(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+(a<c?1:-1))}return a}function h(a,b,d){if(+a){b=a.getDate()+b;var c=p(a);c.setHours(9);c.setDate(b);a.setDate(b);d||q(a);k(a,c)}return a}function k(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:
-1)*tb)}function l(a,b){a.setMinutes(a.getMinutes()+b);return a}function q(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function p(a,b){return b?q(new Date(+a)):new Date(+a)}function n(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function t(a,b,c){for(b=b||1;!a.getDay()||c&&1==a.getDay()||!c&&6==a.getDay();)h(a,b);return a}function v(a,b){return Math.round((p(a,!0)-p(b,!0))/864E5)}function E(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),
a.setMonth(0),a.setFullYear(c));d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d));e!==b&&a.setDate(e)}function r(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));c===b&&(c=!0);return z(a,c)||(a?new Date(a):null)}return null}function z(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);
if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1));c[5]&&(d.setDate(c[5]),e.setDate(c[5]));k(d,e);c[7]&&d.setHours(c[7]);c[8]&&d.setMinutes(c[8]);c[10]&&d.setSeconds(c[10]);c[12]&&d.setMilliseconds(1E3*Number("0."+c[12]));k(d,e)}else d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?1E3*Number("0."+c[12]):0),c[14]&&(e=60*Number(c[16])+(c[18]?Number(c[18]):0),e*="-"==c[15]?1:-1,
d=new Date(+d+6E4*e));return d}function T(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function G(a,b,c){return na(a,null,b,c)}function na(a,b,c,d){d=d||la;var e=a,f=b,h,g=c.length,p,l,m,k="";for(h=0;h<g;h++)if(p=c.charAt(h),"'"==p)for(l=h+1;l<g;l++){if("'"==c.charAt(l)){e&&(k=l==h+1?
k+"'":k+c.substring(h+1,l),h=l);break}}else if("("==p)for(l=h+1;l<g;l++){if(")"==c.charAt(l)){h=G(e,c.substring(h+1,l),d);parseInt(h.replace(/\D/,""),10)&&(k+=h);h=l;break}}else if("["==p)for(l=h+1;l<g;l++){if("]"==c.charAt(l)){p=c.substring(h+1,l);h=G(e,p,d);h!=G(f,p,d)&&(k+=h);h=l;break}}else if("{"==p)e=b,f=a;else if("}"==p)e=a,f=b;else{for(l=g;l>h;l--)if(m=ub[c.substring(h,l)]){e&&(k+=m(e,d));h=l-1;break}l==h&&e&&(k+=p)}return k}function U(a){if(a.end){var b=a.end;a=a.allDay;b=p(b);return a||
b.getHours()||b.getMinutes()?h(b,1):q(b)}return h(p(a.start),1)}function ca(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function Ea(a,b){return a.end>b.start&&a.start<b.end}function da(a,b,c,d){var e=[],f,h=a.length,g,l,m,k,t;for(f=0;f<h;f++)g=a[f],l=g.start,m=b[f],m>c&&l<d&&(l<c?(l=p(c),k=!1):k=!0,m>d?(m=p(d),t=!1):t=!0,e.push({event:g,start:l,end:m,isStart:k,isEnd:t,msLength:m-l}));return e.sort(ca)}function va(a){var b=[],c,d=a.length,e,f,h,g;for(c=0;c<d;c++){e=a[c];for(f=
0;;){h=!1;if(b[f])for(g=0;g<b[f].length;g++)if(Ea(b[f][g],e)){h=!0;break}if(h)f++;else break}b[f]?b[f].push(e):b[f]=[e]}return b}function Fa(c,d,e){c.unbind("mouseover").mouseover(function(c){for(var f=c.target,h;f!=this;)h=f,f=f.parentNode;(f=h._fci)!==b&&(h._fci=b,h=d[f],e(h.event,h.element,h),a(c.target).trigger(c));c.stopPropagation()})}function Ga(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.width(Math.max(0,c-Ta(f,d)))}function gb(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.height(Math.max(0,
c-Ca(f,d)))}function Ta(b,c){var d=(parseFloat(a.css(b[0],"paddingLeft",!0))||0)+(parseFloat(a.css(b[0],"paddingRight",!0))||0),e;e=(parseFloat(a.css(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.css(b[0],"borderRightWidth",!0))||0);d+=e;e=c?(parseFloat(a.css(b[0],"marginLeft",!0))||0)+(parseFloat(a.css(b[0],"marginRight",!0))||0):0;return d+e}function Ca(b,c){var d=(parseFloat(a.css(b[0],"paddingTop",!0))||0)+(parseFloat(a.css(b[0],"paddingBottom",!0))||0),e;e=(parseFloat(a.css(b[0],"borderTopWidth",
!0))||0)+(parseFloat(a.css(b[0],"borderBottomWidth",!0))||0);return d+e+(c?hb(b):0)}function hb(b){return(parseFloat(a.css(b[0],"marginTop",!0))||0)+(parseFloat(a.css(b[0],"marginBottom",!0))||0)}function Ka(a,b){b="number"==typeof b?b+"px":b;a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function eb(){}function ib(a,b){return a-b}function wa(a){return(10>a?"0":"")+a}function Sa(a,c){if(a[c]!==b)return a[c];for(var d=c.split(/(?=[A-Z])/),e=d.length-1,f;0<=e;e--)if(f=a[d[e].toLowerCase()],
f!==b)return f;return a[""]}function xa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function jb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Na(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Oa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function Ua(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+vb[b.getDay()])})}function kb(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),h=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,c=a.textColor||c.textColor||b("eventTextColor"),e=[];h&&e.push("background-color:"+h);d&&e.push("border-color:"+d);c&&e.push("color:"+c);return e.join(";")}function Ma(b,c,d){a.isFunction(b)&&
(b=[b]);if(b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function Da(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function wb(b,c,d){function e(b){var c=q(new Date),d;X.each(function(e,f){n.curYear||(n.curYear=n.start);var g=p(n.start);g.setFullYear(g.getFullYear(),e,1);g.setFullYear(g.getFullYear(),e,1-g.getDay());a(f).find("td").each(function(f,p){var l;d=a(p);g.getMonth()==e?(d.removeClass("fc-other-month"),l=A(g,"-yyyy-MM-dd")):(d.addClass("fc-other-month"),
l=" ui-state-disabled");+g==+c&&g.getMonth()==e?d.addClass(F+"-state-highlight fc-today"):d.removeClass(F+"-state-highlight fc-today");var D=d.find("div.fc-day-number");D.text(g.getDate());var m=D.parent().parent();b||(D=m.attr("class").split(" "),a.each(D,function(a,b){-1!==b.indexOf("fc-day")&&m.removeClass(b);m.removeClass("ui-state-disabled")}));m.addClass(F+"-widget-content fc-day"+l);h(g,1)})});P.filter(".fc-year-have-event").removeClass("fc-year-have-event ui-state-default")}function f(a){if(r("selectable")){var b=
this.className.search("fc-day-");-1!=b&&(b=this.className.substring(b+7,b+7+10),b=b.split("-"),b=new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10),0,0,0),x("reportDayClick",this,b,!0,a))}}function g(a,b,c){c&&K.build();c=p(n.visStart);for(var d=h(p(c),L),e=0;e<Z;e++){var D=new Date(Math.max(c,a)),m=new Date(Math.min(d,b));if(D<m){var k;H?(k=v(m,c)*I+Q+1,D=v(D,c)*I+Q+1):(k=v(D,c),D=v(m,c));l(e,k,e,D-1).click(f)}h(c,7);h(d,7)}}function l(a,c,d,e){a=K.rect(a,c,d,e,b);return z(a,b)}function m(a){return{row:Math.floor(v(a,
n.visStart)/7),col:t(a.getDay())}}function k(a){var b=a.row;a=a.col;return h(p(n.visStart),7*b+a*I+Q)}function t(a){return(a-Math.max(Y,W)+L)%L*I+Q}var n=this;n.renderYear=function(c,d,g,l){Z=d;L=g;(H=r("isRTL"))?(I=-1,Q=L-1):(I=1,Q=0);Y=r("firstDay");W=r("weekends")?0:1;F=r("theme")?"ui":"fc";r("columnFormat");if(c=!u){g=F+"-widget-header";var D=F+"-widget-content",m,k,t,q=p(n.start),ba=la.dayNamesShortest,La=la.monthNames;d="<table class='fc-border-separate fc-year-main-table' style='width:100%'><tr >";
for(var v=0;12>v;v++){q.setFullYear(q.getFullYear(),v,1);q.setFullYear(q.getFullYear(),v,1-q.getDay());0==v%3&&0<v&&(d+="</tr><tr>");d+="<td class='fc-year-monthly-td ui-widget'>";d+="<table class='ui-widget' style='width:100%' cellspacing='0'><thead><tr><th colspan='7' class='fc-year-monthly-header "+g+"' style='height:18px'>"+La[v]+"</th></tr><tr>";for(m=0;m<L;m++)d+="<th class='fc-year-month-weekly-head'>"+ba[m]+"</th>";d+="</tr></thead><tbody>";for(m=0;6>m;m++){d+="<tr class='ui-widget-content fc-week"+
m+"'>";for(k=0;k<L;k++)t=q.getMonth()==v?A(q,"-yyyy-MM-dd"):"",d+="<td style='height:32px' class='fc- "+D+" fc-day"+t+"'><div>"+(l?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'></div></div></td>",h(q,1);d+="</tr>"}d+="</tbody></table>";d+="</td>"}u=a(d+"</tr></table>").appendTo(b);w=u.find("thead");C=w.find("th");X=u.find("table");P=u.find("table tr td");P.click(f);y=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else E();e(c)};n.setHeight=function(a){ua=
a;a=ua-w.height();u.parent().height(a).css("overflow-y","auto")};n.setWidth=function(a){};n.renderDayOverlay=g;n.defaultSelectionEnd=function(a,b){return p(a)};n.renderSelection=function(a,b,c){g(a,h(p(b),1),!0)};n.clearSelection=function(){ja()};n.reportDayClick=function(a,b,c){var d=m(a);x("dayClick",J[d.row*L+d.col],a,b,c)};n.dragStart=function(a,b,c){M.start(function(a){ja();a&&l(a.row,a.col,a.row,a.col)},b)};n.dragStop=function(a,b,c){var d=M.stop();ja();d&&(d=k(d),x("drop",a,d,!0,b,c))};n.defaultEventEnd=
function(a){return p(a.start)};n.getHoverListener=function(){return M};n.colContentLeft=function(a){return N.left(a)};n.colContentRight=function(a){return N.right(a)};n.dayOfWeekCol=t;n.dateCell=m;n.cellDate=k;n.cellIsAllDay=function(){return!0};n.allDayRow=function(a){return P.eq(a)};n.allDayBounds=function(a){return{left:0,right:ga}};n.getRowCnt=function(){return Z};n.getColCnt=function(){return L};n.getColWidth=function(){return ka};n.getBodyRows=function(){return P};n.getDaySegmentContainer=function(){return y};
Va.call(n,b,c,d);Wa.call(n);Xa.call(n);xb.call(n);var r=n.opt,x=n.trigger,E=n.clearEvents,z=n.renderOverlay,ja=n.clearOverlays,A=c.formatDate,u,w,C,P,X,J,y,ga,ua,ka,Z,L,K,M,N,H,I,Q,Y,W,F;Na(b.addClass("fc-grid"));K=new Ya(function(b,c){var d,e,f;C.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();P.each(function(c,h){c<Z&&(d=a(h),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)});f[1]=e+d.outerHeight()});M=new Za(K);N=new $a(function(a){return bodyCellTopInners.eq(a)})}
function xb(){function b(c){var e=p(d.visStart),f=p(d.visEnd),h,g,l=[];h=a.map(c,U);g=[];var m,n=c.length,k,t,S,q,w;for(m=0;m<n;m++)k=c[m],t=k.start,S=h[m],S>e&&t<f&&(t<e?(t=p(e),q=!1):q=!0,S>f?(S=p(f),w=!1):w=!0,g.push({event:k,start:t,end:S,isStart:q,isEnd:w,msLength:S-t}));e=g.sort(ca);c=[];h=e.length;for(f=0;f<h;f++){g=e[f];for(m=0;;){n=!1;if(c[m])for(k=0;k<c[m].length;k++)if(Ea(c[m][k],g)){n=!0;break}if(n)m++;else break}c[m]?c[m].push(g):c[m]=[g]}for(e=0;e<c.length;e++)for(f=c[e],h=0;h<f.length;h++)g=
f[h],g.row=void 0,g.level=e,l.push(g);return l}function c(a,b){var d=E(),g;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(c,l){f("eventDragStart",b,a,c,l);q(a,b);d.start(function(c,d,f,l){b.draggable("option","revert",!c||!f&&!l);A();c?(g=7*f+l*(e("isRTL")?-1:1),z(h(p(a.start),g),h(U(a),g))):g=0},c,"drag")},stop:function(c,e){d.stop();A();f("eventDragStop",b,a,c,e);g?v(this,a,g,0,a.allDay,c,e):(b.css("filter",""),t(a,b))}})}var d=this;
d.renderEvents=function(c,d){m(c);var e=b(c);try{var f=u();a("div.fc-day-content",f).html("");f.filter("td.fc-year-have-event").removeClass("fc-year-have-event ui-state-default");for(var g,l=0;l<e.length;l++)for(var n=p(e[l].start);n.getTime()<e[l].end.getTime();){g=f.filter(".fc-day-"+G(e[l].start,"yyyy-MM-dd"));g.addClass("fc-year-have-event ui-state-default");var D=a("div.fc-day-content",g).html();""!=a.trim(D)?a("div.fc-day-content",g).html(parseInt(D)+1):a("div.fc-day-content",g).html("1");h(n,
1)}}catch(k){alert("MyrenderDaySegs:"+k)}};d.compileDaySegs=b;d.clearEvents=function(){n();r().empty()};d.bindDaySeg=function(a,b,d){g(a)&&c(a,b);d.isEnd&&l(a)&&w(a,b,d);k(a,b)};ab.call(d);var e=d.opt,f=d.trigger,g=d.isEventDraggable,l=d.isEventResizable,m=d.reportEvents,n=d.reportEventClear,k=d.eventElementHandlers,t=d.showEvents,q=d.hideEvents,v=d.eventDrop,r=d.getDaySegmentContainer,E=d.getHoverListener,z=d.renderDayOverlay,A=d.clearOverlays,u=d.getBodyRows,w=d.resizableDayEvent}function bb(b,
c,d){function e(b){var c=b||1==N,d=x.start.getMonth(),f=q(new Date),h,g,p;c&&X.each(function(b,c){h=a(c);g=t(b);h.html(C(g,Ha));Ua(h,g)});ga.each(function(b,e){h=a(e);g=t(b);g.getMonth()==d?h.removeClass("fc-other-month"):h.addClass("fc-other-month");+g==+f?h.addClass(fa+"-state-highlight fc-today"):h.removeClass(fa+"-state-highlight fc-today");h.find("div.fc-day-number").text(g.getDate());c&&Ua(h,g)});y.each(function(b,c){p=a(c);b<N?(p.show(),b==N-1?p.addClass("fc-last"):p.removeClass("fc-last")):
p.hide()})}function f(a){if(!E("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),b=t(b);z("dayClick",this,b,!0,a)}}function g(a,b,c){c&&I.build();c=p(x.visStart);for(var d=h(p(c),H),e=0;e<N;e++){var m=new Date(Math.max(c,a)),n=new Date(Math.min(d,b));if(m<n){var D;W?(D=v(n,c)*F+R+1,m=v(m,c)*F+R+1):(D=v(m,c),m=v(n,c));l(e,D,e,m-1).click(f).mousedown(w)}h(c,7);h(d,7)}}function l(a,c,d,e){a=I.rect(a,c,d,e,b);return A(a,b)}function m(a){return{row:Math.floor(v(a,x.visStart)/7),col:r(a.getDay())}}
function n(a){return k(a.row,a.col)}function k(a,b){return h(p(x.visStart),7*a+b*F+R)}function t(a){return k(Math.floor(a/H),a%H)}function r(a){return(a-Math.max(pa,V)+H)%H*F+R}var x=this;x.renderBasic=function(c,d,h,g){N=d;H=h;(W=E("isRTL"))?(F=-1,R=H-1):(F=1,R=0);pa=E("firstDay");V=E("weekends")?0:1;fa=E("theme")?"ui":"fc";Ha=E("columnFormat");if(d=!J){var p=fa+"-widget-header",l=fa+"-widget-content",m;h="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(m=0;m<
H;m++)h+="<th class='fc- "+p+"'/>";h+="</tr></thead><tbody>";for(m=0;m<c;m++){h+="<tr class='fc-week"+m+"'>";for(p=0;p<H;p++)h+="<td class='fc- "+l+" fc-day"+(m*H+p)+"'><div>"+(g?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";h+="</tr>"}c=a(h+"</tbody></table>").appendTo(b);P=c.find("thead");X=P.find("th");J=c.find("tbody");y=J.find("tr");ga=J.find("td");G=ga.filter(":first-child");ka=y.eq(0).find("div.fc-day-content div");
Oa(P.add(P.find("tr")));Oa(y);y.eq(0).addClass("fc-first");ga.click(f).mousedown(w);Z=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else T();e(d)};x.setHeight=function(b){K=b;b=K-P.height();var c,d,e;"variable"==E("weekMode")?c=d=Math.floor(b/(1==N?2:6)):(c=Math.floor(b/N),d=b-c*(N-1));G.each(function(b,f){b<N&&(e=a(f),Ka(e.find("> div"),(b==N-1?d:c)-Ca(e)))})};x.setWidth=function(a){L=a;Y.clear();M=Math.floor(L/H);Ga(X.slice(0,-1),M)};x.renderDayOverlay=g;x.defaultSelectionEnd=
function(a,b){return p(a)};x.renderSelection=function(a,b,c){g(a,h(p(b),1),!0)};x.clearSelection=function(){u()};x.reportDayClick=function(a,b,c){var d=m(a);z("dayClick",ga[d.row*H+d.col],a,b,c)};x.dragStart=function(a,b,c){Q.start(function(a){u();a&&l(a.row,a.col,a.row,a.col)},b)};x.dragStop=function(a,b,c){var d=Q.stop();u();d&&(d=n(d),z("drop",a,d,!0,b,c))};x.defaultEventEnd=function(a){return p(a.start)};x.getHoverListener=function(){return Q};x.colContentLeft=function(a){return Y.left(a)};x.colContentRight=
function(a){return Y.right(a)};x.dayOfWeekCol=r;x.dateCell=m;x.cellDate=n;x.cellIsAllDay=function(){return!0};x.allDayRow=function(a){return y.eq(a)};x.allDayBounds=function(a){return{left:0,right:L}};x.getRowCnt=function(){return N};x.getColCnt=function(){return H};x.getColWidth=function(){return M};x.getDaySegmentContainer=function(){return Z};Va.call(x,b,c,d);Wa.call(x);Xa.call(x);yb.call(x);var E=x.opt,z=x.trigger,T=x.clearEvents,A=x.renderOverlay,u=x.clearOverlays,w=x.daySelectionMousedown,C=
c.formatDate,P,X,J,y,ga,G,ka,Z,L,K,M,N,H,I,Q,Y,W,F,R,pa,V,fa,Ha;Na(b.addClass("fc-grid"));I=new Ya(function(b,c){var d,e,f;X.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();y.each(function(c,h){c<N&&(d=a(h),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)});f[1]=e+d.outerHeight()});Q=new Za(I);Y=new $a(function(a){return ka.eq(a)})}function yb(){function b(c){var e=u(),f=w(),g=p(d.visStart),f=h(p(g),f),l=a.map(c,U),m,n,k,t,q,S,ba=[];for(m=0;m<e;m++){n=va(da(c,
l,g,f));for(k=0;k<n.length;k++)for(t=n[k],q=0;q<t.length;q++)S=t[q],S.row=m,S.level=k,ba.push(S);h(g,7);h(f,7)}return ba}function c(a,b){var d=E(),g;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(c,l){f("eventDragStart",b,a,c,l);q(a,b);d.start(function(c,d,f,l){b.draggable("option","revert",!c||!f&&!l);A();c?(g=7*f+l*(e("isRTL")?-1:1),z(h(p(a.start),g),h(U(a),g))):g=0},c,"drag")},stop:function(c,e){d.stop();A();f("eventDragStop",b,a,c,
e);g?v(this,a,g,0,a.allDay,c,e):(b.css("filter",""),t(a,b))}})}var d=this;d.renderEvents=function(a,c){m(a);C(b(a),c)};d.compileDaySegs=b;d.clearEvents=function(){n();r().empty()};d.bindDaySeg=function(a,b,d){g(a)&&c(a,b);d.isEnd&&l(a)&&P(a,b,d);k(a,b)};ab.call(d);var e=d.opt,f=d.trigger,g=d.isEventDraggable,l=d.isEventResizable,m=d.reportEvents,n=d.reportEventClear,k=d.eventElementHandlers,t=d.showEvents,q=d.hideEvents,v=d.eventDrop,r=d.getDaySegmentContainer,E=d.getHoverListener,z=d.renderDayOverlay,
A=d.clearOverlays,u=d.getRowCnt,w=d.getColCnt,C=d.renderDaySegs,P=d.resizableDayEvent}function ob(c,d,e){function f(){function a(){V.scrollTop(d)}var b=n(),c=p(b);c.setHours(w("firstHour"));var d=x(b,c)+1;a();setTimeout(a,0)}function g(a){if(!w("selectable")){var b=Math.min(ha-1,Math.floor((a.pageX-L.offset().left-ra)/Pa)),c=r(b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*w("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+sa),C("dayClick",H[b],c,!1,a)):C("dayClick",
H[b],c,!0,a)}}function m(a,b,c){c&&ta.build();var d=p(u.visStart);ma?(c=v(b,d)*ca+da+1,a=v(a,d)*ca+da+1):(c=v(a,d),a=v(b,d));c=Math.max(0,c);a=Math.min(ha,a);c<a&&k(0,c,0,a-1).click(g).mousedown(U)}function k(a,b,c,d){a=ta.rect(a,b,c,d,W);return X(a,W)}function t(a,b){for(var c=p(u.visStart),d=h(p(c),1),e=0;e<ha;e++){var f=new Date(Math.max(c,a)),l=new Date(Math.min(d,b));if(f<l){var m=e*ca+da,m=ta.rect(0,m,0,m,fa),f=x(c,f),l=x(c,l);m.top=f;m.height=l-f;X(m,fa).click(g).mousedown(ja)}h(c,1);h(d,1)}}
function ba(a){var b=r(a.col);a=a.row;w("allDaySlot")&&a--;0<=a&&l(b,sa+a*w("slotMinutes"));return b}function r(a){return h(p(u.visStart),a*ca+da)}function B(a){return w("allDaySlot")&&!a.row}function E(a){return(a-Math.max(va,na)+ha)%ha*ca+da}function x(a,c){a=p(a,!0);if(c<l(p(a),sa))return 0;if(c>=l(p(a),la))return qa.height();var d=w("slotMinutes"),e=60*c.getHours()+c.getMinutes()-sa,f=Math.floor(e/d),h=O[f];h===b&&(h=O[f]=qa.find("tr:eq("+f+") td div")[0].offsetTop);return Math.max(0,Math.round(h-
1+e%d/d*Ia))}function z(b,c){var d=w("selectHelper");ta.build();if(d){var e=v(b,u.visStart)*ca+da;if(0<=e&&e<ha){var e=ta.rect(0,e,0,e,fa),f=x(b,b),h=x(b,c);if(h>f){e.top=f;e.height=h-f;e.left+=2;e.width-=5;if(a.isFunction(d)){if(d=d(b,c))e.position="absolute",e.zIndex=8,oa=a(d).css(e).appendTo(fa)}else e.isStart=!0,e.isEnd=!0,oa=a(ka({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},e)),oa.css("opacity",w("dragOpacity"));oa&&(oa.click(g).mousedown(ja),fa.append(oa),Ga(oa,e.width,
!0),gb(oa,e.height,!0))}}}else t(b,c)}function G(){J();oa&&(oa.remove(),oa=null)}function ja(b){if(1==b.which&&w("selectable")){ga(b);var c;Aa.start(function(a,b){G();if(a&&a.col==b.col&&!B(a)){var d=ba(b),e=ba(a);c=[d,l(p(d),w("slotMinutes")),e,l(p(e),w("slotMinutes"))].sort(ib);z(c[0],c[3])}else c=null},b);a(document).one("mouseup",function(a){Aa.stop();c&&(+c[0]==+c[1]&&A(c[0],!1,a),y(c[0],c[3],!1,a))})}}function A(a,b,c){C("dayClick",H[E(a.getDay())],a,b,c)}var u=this;u.renderAgenda=function(b){ha=
b;Ja=w("theme")?"ui":"fc";na=w("weekends")?0:1;va=w("firstDay");(ma=w("isRTL"))?(ca=-1,da=ha-1):(ca=1,da=0);sa=T(w("minTime"));la=T(w("maxTime"));Fa=w("columnFormat");if(L)P();else{b=Ja+"-widget-header";var d=Ja+"-widget-content",e,f,h,m,k,t=0==w("slotMinutes")%15;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ha;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+
b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ha;f++)e+="<td class='fc- fc-col"+f+" "+d+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";L=a(e+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody></table>")).appendTo(c);K=L.find("thead");M=K.find("th").slice(1,-1);N=L.find("tbody");H=N.find("td").slice(0,-1);I=H.find("div.fc-day-content div");Q=H.eq(0);Y=Q.find("> div");Oa(K.add(K.find("tr")));
Oa(N.add(N.find("tr")));ya=K.find("th:first");za=L.find(".fc-agenda-gutter");W=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c);w("allDaySlot")?(F=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(W),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+w("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",
R=a(e).appendTo(W),pa=R.find("tr"),pa.find("td").click(g).mousedown(U),ya=ya.add(R.find("th:first")),za=za.add(R.find("th.fc-agenda-gutter")),W.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):F=a([]);V=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(W);fa=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(V);Ha=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(fa);e=
"<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";h=n();m=l(p(h),la);l(h,sa);for(f=cb=0;h<m;f++)k=h.getMinutes(),e+="<tr class='fc-slot"+f+" "+(k?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(t&&k?"&nbsp;":Z(h,w("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",l(h,w("slotMinutes")),cb++;e+="</tbody></table>";qa=a(e).appendTo(fa);lb=qa.find("div:first");qa.find("td").click(g).mousedown(ja);ya=ya.add(qa.find("th:first"))}h=
q(new Date);for(b=0;b<ha;b++)f=r(b),d=M.eq(b),d.html(Z(f,Fa)),e=H.eq(b),+f==+h?e.addClass(Ja+"-state-highlight fc-today"):e.removeClass(Ja+"-state-highlight fc-today"),Ua(d.add(e),f)};u.setWidth=function(b){mb=b;Qa.clear();ra=0;Ga(ya.width("").each(function(b,c){ra=Math.max(ra,a(c).outerWidth())}),ra);b=V[0].clientWidth;(db=V.width()-b)?(Ga(za,db),za.show().prev().removeClass("fc-last")):za.hide().prev().addClass("fc-last");Pa=Math.floor((b-ra)/ha);Ga(M.slice(0,-1),Pa)};u.setHeight=function(a,c){a===
b&&(a=nb);nb=a;O={};var d=N.position().top,e=V.position().top,h=Math.min(a-d,qa.height()+e+1);Y.height(h-Ca(Q));W.css("top",d);V.height(h-e-1);Ia=lb.height()+1;c&&f()};u.beforeHide=function(){pb=V.scrollTop()};u.afterShow=function(){V.scrollTop(pb)};u.defaultEventEnd=function(a){var b=p(a.start);return a.allDay?b:l(b,w("defaultEventMinutes"))};u.timePosition=x;u.dayOfWeekCol=E;u.dateCell=function(a){return{row:Math.floor(v(a,u.visStart)/7),col:E(a.getDay())}};u.cellDate=ba;u.cellIsAllDay=B;u.allDayRow=
function(a){return pa};u.allDayBounds=function(){return{left:ra,right:mb-db}};u.getHoverListener=function(){return Aa};u.colContentLeft=function(a){return Qa.left(a)};u.colContentRight=function(a){return Qa.right(a)};u.getDaySegmentContainer=function(){return F};u.getSlotSegmentContainer=function(){return Ha};u.getMinMinute=function(){return sa};u.getMaxMinute=function(){return la};u.getBodyContent=function(){return fa};u.getRowCnt=function(){return 1};u.getColCnt=function(){return ha};u.getColWidth=
function(){return Pa};u.getSlotHeight=function(){return Ia};u.defaultSelectionEnd=function(a,b){return b?p(a):l(p(a),w("slotMinutes"))};u.renderDayOverlay=m;u.renderSelection=function(a,b,c){c?w("allDaySlot")&&m(a,h(p(b),1),!0):z(a,b)};u.clearSelection=G;u.reportDayClick=A;u.dragStart=function(a,b,c){Aa.start(function(a){J();if(a)if(B(a))k(a.row,a.col,a.row,a.col);else{a=ba(a);var b=l(p(a),w("defaultEventMinutes"));t(a,b)}},b)};u.dragStop=function(a,b,c){var d=Aa.stop();J();d&&C("drop",a,ba(d),B(d),
b,c)};Va.call(u,c,d,e);Wa.call(u);Xa.call(u);zb.call(u);var w=u.opt,C=u.trigger,P=u.clearEvents,X=u.renderOverlay,J=u.clearOverlays,y=u.reportSelection,ga=u.unselect,U=u.daySelectionMousedown,ka=u.slotSegHtml,Z=d.formatDate,L,K,M,N,H,I,Q,Y,W,F,R,pa,V,fa,Ha,qa,lb,ya,za,oa,mb,nb,ra,Pa,db,Ia,pb,ha,cb,ta,Aa,Qa,O={},Ja,va,na,ma,ca,da,sa,la,Fa;Na(c.addClass("fc-agenda"));ta=new Ya(function(b,c){var d,e,f;M.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();w("allDaySlot")&&
(d=pa,e=d.offset().top,b[0]=[e,e+d.outerHeight()]);for(var h=fa.offset().top,g=V.offset().top,p=g+V.outerHeight(),l=0;l<cb;l++)b.push([Math.max(g,Math.min(p,h+Ia*l)),Math.max(g,Math.min(p,h+Ia*(l+1)))])});Aa=new Za(ta);Qa=new $a(function(a){return I.eq(a)})}function zb(){function c(b){b=va(da(b,a.map(b,U),k.visStart,k.visEnd));var d,e=b.length,f,h,g,p=[];for(d=0;d<e;d++)for(f=b[d],h=0;h<f.length;h++)g=f[h],g.row=0,g.level=d,p.push(g);return p}function d(a){return a.end?p(a.end):l(p(a.start),t("defaultEventMinutes"))}
function e(a,b){var c="<",d=a.url,f=kb(a,t),h=f?" style='"+f+"'":"",g=["fc-event","fc-event-skin","fc-event-vert"];v(a)&&g.push("fc-event-draggable");b.isStart&&g.push("fc-corner-top");b.isEnd&&g.push("fc-corner-bottom");g=g.concat(a.className);a.source&&(g=g.concat(a.source.className||[]));c=d?c+("a href='"+xa(a.url)+"'"):c+"div";c+=" class='"+g.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+f+"'><div class='fc-event-inner fc-event-skin'"+h+"><div class='fc-event-head fc-event-skin'"+
h+"><div class='fc-event-time'>"+xa(V(a.start,a.end,t("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+xa(a.title)+"</div></div><div class='fc-event-bg'></div></div>";b.isEnd&&r(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function f(a,b,c){var d=b.find("div.fc-event-time");v(a)&&m(a,b,d);c.isEnd&&r(a)&&n(a,b,d);G(a,b)}function g(a,b,c){function d(){l||(b.width(e).height("").draggable("option","grid",null),
l=!0)}var e,f,l=!0,m,k=t("isRTL")?-1:1,n=C(),D=L(),S=K(),w=X();b.draggable({zIndex:9,opacity:t("dragOpacity","month"),revertDuration:t("dragRevertDuration"),start:function(g,w){q("eventDragStart",b,a,g,w);I(a,b);e=b.width();n.start(function(e,g,n,q){F();e?(f=!1,m=q*k,e.row?c?l&&(b.width(D-10),gb(b,S*Math.round((a.end?(a.end-a.start)/6E4:t("defaultEventMinutes"))/t("slotMinutes"))),b.draggable("option","grid",[D,1]),l=!1):f=!0:(W(h(p(a.start),m),h(U(a),m)),d()),f=f||l&&!m):(d(),f=!0);b.draggable("option",
"revert",f)},g,"drag")},stop:function(c,e){n.stop();F();q("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),H(a,b);else{var h=0;l||(h=Math.round((b.offset().top-M().offset().top)/S)*t("slotMinutes")+w-(60*a.start.getHours()+a.start.getMinutes()));Q(this,a,m,h,l,c,e)}}})}function m(a,b,c){function d(b){var e=l(p(a.start),b),f;a.end&&(f=l(p(a.end),b));c.text(V(e,f,t("timeFormat")))}function e(){g&&(c.css("display",""),b.draggable("option","grid",[r,u]),g=!1)}var f,g=!1,k,n,D,S=t("isRTL")?-1:1,w=
C(),v=Z(),r=L(),u=K();b.draggable({zIndex:9,scroll:!1,grid:[r,u],axis:1==v?"y":!1,opacity:t("dragOpacity"),revertDuration:t("dragRevertDuration"),start:function(d,l){q("eventDragStart",b,a,d,l);I(a,b);f=b.position();n=D=0;w.start(function(d,f,l,m){b.draggable("option","revert",!d);F();d&&(k=m*S,t("allDaySlot")&&!d.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),W(h(p(a.start),k),h(U(a),k))):e())},d,"drag")},drag:function(a,b){n=Math.round((b.position.top-f.top)/u)*t("slotMinutes");n!=D&&
(g||d(n),D=n)},stop:function(c,h){var l=w.stop();F();q("eventDragStop",b,a,c,h);l&&(k||n||g)?Q(this,a,k,g?0:n,g,c,h):(e(),b.css("filter",""),b.css(f),d(0),H(a,b))}})}function n(a,b,c){var d,e,f=K();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){d=e=0;I(a,b);b.css("z-index",9);q("eventResizeStart",this,a,c,f)},resize:function(h,g){d=Math.round((Math.max(f,b.height())-g.originalSize.height)/f);d!=e&&(c.text(V(a.start,d||a.end?l(x(a),t("slotMinutes")*d):null,t("timeFormat"))),
e=d)},stop:function(c,e){q("eventResizeStop",this,a,c,e);d?Y(this,a,0,t("slotMinutes")*d,c,e):(b.css("z-index",8),H(a,b))}})}var k=this;k.renderEvents=function(g,m){E(g);var n,v=g.length,r=[],u=[];for(n=0;n<v;n++)g[n].allDay?r.push(g[n]):u.push(g[n]);t("allDaySlot")&&(O(c(r),m),A());var v=Z(),r=X(),x=P(),ea=l(p(k.visStart),r),F=a.map(u,d),I,B,C,aa,R,Q;n=[];for(I=0;I<v;I++){C=B=va(da(u,F,ea,l(p(ea),x-r)));var V=Q=R=aa=void 0,Y=void 0,z=void 0;for(aa=C.length-1;0<aa;aa--)for(V=C[aa],R=0;R<V.length;R++)for(Y=
V[R],Q=0;Q<C[aa-1].length;Q++)z=C[aa-1][Q],Ea(Y,z)&&(z.forward=Math.max(z.forward||0,(Y.forward||0)+1));for(C=0;C<B.length;C++)for(aa=B[C],R=0;R<aa.length;R++)Q=aa[R],Q.col=I,Q.level=C,n.push(Q);h(ea,1,!0)}var u=n.length,W,Ra,G;B="";x={};ea={};I=w();v=Z();(C=t("isRTL"))?(aa=-1,V=v-1):(aa=1,V=0);for(v=0;v<u;v++)r=n[v],F=r.event,R=J(r.start,r.start),Q=J(r.start,r.end),W=r.col,Y=r.level,z=r.forward||0,Ra=y(W*aa+V),G=T(W*aa+V)-Ra,G=Math.min(G-6,.95*G),W=Y?G/(Y+z+1):z?2*(G/(z+1)-6):G,Y=Ra+G/(Y+z+1)*Y*
aa+(C?G-W:0),r.top=R,r.left=Y,r.outerWidth=W,r.outerHeight=Q-R,B+=e(F,r);I[0].innerHTML=B;C=I.children();for(v=0;v<u;v++)r=n[v],F=r.event,B=a(C[v]),aa=q("eventRender",F,F,B),!1===aa?B.remove():(aa&&!0!==aa&&(B.remove(),B=a(aa).css({position:"absolute",top:r.top,left:r.left}).appendTo(I)),r.element=B,F._id===m?f(F,B,r):B[0]._fci=v,N(F,B));Fa(I,n,f);for(v=0;v<u;v++)if(r=n[v],B=r.element)I=x[F=r.key=jb(B[0])],r.vsides=I===b?x[F]=Ca(B,!0):I,I=ea[F],r.hsides=I===b?ea[F]=Ta(B,!0):I,F=B.find("div.fc-event-content"),
F.length&&(r.contentTop=F[0].offsetTop);for(v=0;v<u;v++)if(r=n[v],B=r.element)B[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",x=Math.max(0,r.outerHeight-r.vsides),B[0].style.height=x+"px",F=r.event,r.contentTop!==b&&10>x-r.contentTop&&(B.find("div.fc-event-time").text(pa(F.start,t("timeFormat"))+" - "+F.title),B.find("div.fc-event-title").remove()),q("eventAfterRender",F,F,B)};k.compileDaySegs=c;k.clearEvents=function(){z();u().empty();w().empty()};k.slotSegHtml=e;k.bindDaySeg=function(a,
b,c){v(a)&&g(a,b,c.isStart);c.isEnd&&r(a)&&ka(a,b,c);G(a,b)};ab.call(k);var t=k.opt,q=k.trigger,v=k.isEventDraggable,r=k.isEventResizable,x=k.eventEnd,E=k.reportEvents,z=k.reportEventClear,G=k.eventElementHandlers,A=k.setHeight,u=k.getDaySegmentContainer,w=k.getSlotSegmentContainer,C=k.getHoverListener,P=k.getMaxMinute,X=k.getMinMinute,J=k.timePosition,y=k.colContentLeft,T=k.colContentRight,O=k.renderDaySegs,ka=k.resizableDayEvent,Z=k.getColCnt,L=k.getColWidth,K=k.getSlotHeight,M=k.getBodyContent,
N=k.reportEventElement,H=k.showEvents,I=k.hideEvents,Q=k.eventDrop,Y=k.eventResize,W=k.renderDayOverlay,F=k.clearOverlays,R=k.calendar,pa=R.formatDate,V=R.formatDates}function Va(a,c,d){function e(a,b){var c=u[a];return"object"==typeof c?Sa(c,b||d):c}function f(a,b){return c.trigger.apply(c,[a,b||q].concat(Array.prototype.slice.call(arguments,2),[q]))}function g(a){return Da(a.editable,(a.source||{}).editable,e("editable"))}function m(a){return a.end?p(a.end):r(a)}function k(a,b,c){a=A[a._id];var d,
e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function n(a,c,d,e){d=d||0;for(var f,g=a.length,p=0;p<g;p++)f=a[p],e!==b&&(f.allDay=e),l(h(f.start,c,!0),d),f.end&&(f.end=l(h(f.end,c,!0),d)),v(f,u)}function t(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=l(h(m(d),b,!0),c),v(d,u)}var q=this;q.element=a;q.calendar=c;q.name=d;q.opt=e;q.trigger=f;q.isEventDraggable=function(a){return g(a)&&!e("disableDragging")};q.isEventResizable=function(a){return g(a)&&!e("disableResizing")};
q.reportEvents=function(a){z={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],z[d._id]?z[d._id].push(d):z[d._id]=[d]};q.eventEnd=m;q.reportEventElement=function(a,b){G.push(b);A[a._id]?A[a._id].push(b):A[a._id]=[b]};q.reportEventClear=function(){G=[];A={}};q.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return f("eventClick",this,a,c)}).hover(function(b){f("eventMouseover",this,a,b)},function(b){f("eventMouseout",this,
a,b)})};q.showEvents=function(a,b){k(a,b,"show")};q.hideEvents=function(a,b){k(a,b,"hide")};q.eventDrop=function(a,b,c,d,e,h,g){var p=b.allDay,l=b._id;n(z[l],c,d,e);f("eventDrop",a,b,c,d,e,function(){n(z[l],-c,-d,p);E(l)},h,g);E(l)};q.eventResize=function(a,b,c,d,e,h){var g=b._id;t(z[g],c,d);f("eventResize",a,b,c,d,function(){t(z[g],-c,-d);E(g)},e,h);E(g)};var r=q.defaultEventEnd,v=c.normalizeEvent,E=c.reportEventChange,z={},G=[],A={},u=c.options}function ab(){function c(a){var b=t("isRTL"),d,e=a.length,
f,h,g,l;d=U();var p=d.left,m=d.right,n,k,q,D,S,u="";for(d=0;d<e;d++)f=a[d],h=f.event,l=["fc-event","fc-event-skin","fc-event-hori"],v(h)&&l.push("fc-event-draggable"),b?(f.isStart&&l.push("fc-corner-right"),f.isEnd&&l.push("fc-corner-left"),n=O(f.end.getDay()-1),k=O(f.start.getDay()),q=f.isEnd?J(n):p,D=f.isStart?y(k):m):(f.isStart&&l.push("fc-corner-left"),f.isEnd&&l.push("fc-corner-right"),n=O(f.start.getDay()),k=O(f.end.getDay()-1),q=f.isStart?J(n):p,D=f.isEnd?y(k):m),l=l.concat(h.className),h.source&&
(l=l.concat(h.source.className||[])),g=h.url,S=kb(h,t),u=g?u+("<a href='"+xa(g)+"'"):u+"<div",u+=" class='"+l.join(" ")+"' style='position:absolute;z-index:8;left:"+q+"px;"+S+"'><div class='fc-event-inner fc-event-skin'"+(S?" style='"+S+"'":"")+">",!h.allDay&&f.isStart&&(u+="<span class='fc-event-time'>"+xa(K(h.start,h.end,t("timeFormat")))+"</span>"),u+="<span class='fc-event-title'>"+xa(h.title)+"</span></div>",f.isEnd&&r(h)&&(u+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),
u+="</"+(g?"a":"div")+">",f.left=q,f.outerWidth=D-q,f.startCol=n,f.endCol=k+1;return u}function d(b,c){var e,f=b.length,h,g,l;for(e=0;e<f;e++)h=b[e],g=h.event,l=a(c[e]),g=q("eventRender",g,g,l),!1===g?l.remove():(g&&!0!==g&&(g=a(g).css({position:"absolute",left:h.left}),l.replaceWith(g),l=g),h.element=l)}function e(a){var c,d=a.length,f,h,g,l,p={};for(c=0;c<d;c++)if(f=a[c],h=f.element)g=f.key=jb(h[0]),l=p[g],l===b&&(l=p[g]=Ta(h,!0)),f.hsides=l}function f(a){var b,c=a.length,d,e;for(b=0;b<c;b++)if(d=
a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function g(a){var c,d=a.length,e,f,h,l,p={};for(c=0;c<d;c++)if(e=a[c],f=e.element)h=e.key,l=p[h],l===b&&(l=p[h]=hb(f)),e.outerHeight=f[0].offsetHeight+l}function l(){var a,b=w(),c=[];for(a=0;a<b;a++)c[a]=T(a).find("td:first div.fc-day-content > div");return c}function m(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function k(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=e.element)f[0].style.top=
b[e.row]+(e.top||0)+"px",e=e.event,q("eventAfterRender",e,e,f)}var n=this;n.renderDaySegs=function(a,b){var h=Z(),p=w(),n=C(),t=0,q,v,r,u=a.length,E,x;h[0].innerHTML=c(a);d(a,h.children());v=a.length;for(q=0;q<v;q++)r=a[q],(x=r.element)&&z(r.event,x);v=a.length;var B;for(q=0;q<v;q++)if(r=a[q],x=r.element)B=r.event,B._id===b?L(B,x,r):x[0]._fci=q;Fa(h,a,L);e(a);f(a);g(a);h=l();for(q=0;q<p;q++){v=[];for(r=0;r<n;r++)v[r]=0;for(;t<u&&(E=a[t]).row==q;){r=v.slice(E.startCol,E.endCol);r=Math.max.apply(Math,
r);E.top=r;r+=E.outerHeight;for(x=E.startCol;x<E.endCol;x++)v[x]=r;t++}h[q].height(Math.max.apply(Math,v))}k(a,m(h))};n.resizableDayEvent=function(b,r,v){var x=t("isRTL"),z=x?"w":"e",y=r.find("div.ui-resizable-"+z),T=!1;Na(r);r.mousedown(function(a){a.preventDefault()}).click(function(a){T&&(a.preventDefault(),a.stopImmediatePropagation())});y.mousedown(function(t){function y(c){q("eventResizeStop",this,b,c);a("body").css("cursor","");fb.stop();N();Ba&&u(this,b,Ba,0,c);setTimeout(function(){T=!1},
0)}if(1==t.which){T=!0;var fb=n.getHoverListener(),J=w(),K=C(),L=x?-1:1,P=x?K-1:0,R=r.css("top"),Ba,O,U=a.extend({},b),X=ca(b.start);H();a("body").css("cursor",z+"-resize").one("mouseup",y);q("eventResizeStart",this,b,t);fb.start(function(n,t){if(n){var q=Math.max(X.row,n.row),r=n.col;1==J&&(q=0);q==X.row&&(r=x?Math.min(X.col,r):Math.max(X.col,r));Ba=7*q+r*L+P-(7*t.row+t.col*L+P);q=h(E(b),Ba,!0);if(Ba){U.end=q;var r=O,u=da([U]),w=v.row,B=a("<div/>"),y=Z(),ba=u.length,C;B[0].innerHTML=c(u);B=B.children();
y.append(B);d(u,B);e(u);f(u);g(u);k(u,m(l()));B=[];for(y=0;y<ba;y++)if(C=u[y].element)u[y].row===w&&C.css("top",R),B.push(C[0]);O=a(B);O.find("*").css("cursor",z+"-resize");r&&r.remove();A(b)}else O&&(G(b),O.remove(),O=null);N();M(b.start,h(p(q),1))}},t)}})};var t=n.opt,q=n.trigger,v=n.isEventDraggable,r=n.isEventResizable,E=n.eventEnd,z=n.reportEventElement,G=n.showEvents,A=n.hideEvents,u=n.eventResize,w=n.getRowCnt,C=n.getColCnt,T=n.allDayRow,U=n.allDayBounds,J=n.colContentLeft,y=n.colContentRight,
O=n.dayOfWeekCol,ca=n.dateCell,da=n.compileDaySegs,Z=n.getDaySegmentContainer,L=n.bindDaySeg,K=n.calendar.formatDates,M=n.renderDayOverlay,N=n.clearOverlays,H=n.clearSelection}function Xa(){function b(a){p&&(p=!1,l(),f("unselect",null,a))}function c(a,b,d,e){p=!0;f("select",null,a,b,d,e)}var d=this;d.select=function(a,d,e){b();d||(d=h(a,e));g(a,d,e);c(a,d,e)};d.unselect=b;d.reportSelection=c;d.daySelectionMousedown=function(f){var h=d.cellDate,p=d.cellIsAllDay,m=d.getHoverListener(),n=d.reportDayClick;
if(1==f.which&&e("selectable")){b(f);var k;m.start(function(a,b){l();a&&p(a)?(k=[h(b),h(a)].sort(ib),g(k[0],k[1],!0)):k=null},f);a(document).one("mouseup",function(a){m.stop();k&&(+k[0]==+k[1]&&n(k[0],!0,a),c(k[0],k[1],!0,a))})}};var e=d.opt,f=d.trigger,h=d.defaultSelectionEnd,g=d.renderSelection,l=d.clearSelection,p=!1;e("selectable")&&e("unselectAuto")&&a(document).mousedown(function(c){var d=e("unselectCancel");d&&a(c.target).parents(d).length||b(c)})}function Wa(){this.renderOverlay=function(d,
e){var f=c.shift();f||(f=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=e[0]&&f.appendTo(e);b.push(f.css(d).show());return f};this.clearOverlays=function(){for(var a;a=b.shift();)c.push(a.hide().unbind())};var b=[],c=[]}function Ya(a){var b,c;this.build=function(){b=[];c=[];a(b,c)};this.cell=function(a,d){var e=b.length,f=c.length,h,g=-1,l=-1;for(h=0;h<e;h++)if(d>=b[h][0]&&d<b[h][1]){g=h;break}for(h=0;h<f;h++)if(a>=c[h][0]&&a<c[h][1]){l=h;break}return 0<=
g&&0<=l?{row:g,col:l}:null};this.rect=function(a,d,e,f,h){h=h.offset();return{top:b[a][0]-h.top,left:c[d][0]-h.left,width:c[f][1]-c[d][0],height:b[e][1]-b[a][0]}}}function Za(c){function d(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY);a=c.cell(a.pageX,a.pageY);if(!a!=!g||a&&(a.row!=g.row||a.col!=g.col))a?(h||(h=a),f(a,h,a.row-h.row,a.col-h.col)):f(a,h),g=a}var e,f,h,g;this.start=function(b,l,p){f=b;h=g=null;c.build();d(l);e=p||"mousemove";a(document).bind(e,d)};this.stop=
function(){a(document).unbind(e,d);return g}}function $a(a){var c=this,d={},e={},f={};c.left=function(c){return e[c]=e[c]===b?(d[c]=d[c]||a(c)).position().left:e[c]};c.right=function(e){return f[e]=f[e]===b?c.left(e)+(d[e]=d[e]||a(e)).width():f[e]};c.clear=function(){d={};e={};f={}}}var la={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{year:"yyyy",
month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesShortest:"SMTWTFS".split(""),buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",year:"year",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Ab={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},
buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},O=a.fullCalendar={version:"1.5.1"},ma=O.views={};a.fn.fullCalendar=function(c){if("string"==typeof c){var e=Array.prototype.slice.call(arguments,1),f;this.each(function(){var d=a.data(this,"fullCalendar");d&&a.isFunction(d[c])&&(d=d[c].apply(d,e),f===b&&(f=d),"destroy"==c&&a.removeData(this,"fullCalendar"))});return f!==b?f:this}var h=c.eventSources||[];delete c.eventSources;c.events&&(h.push(c.events),delete c.events);c=a.extend(!0,
{},la,c.isRTL||c.isRTL===b&&la.isRTL?Ab:{},c);this.each(function(b,e){var f=a(e),g=new d(f,c,h);f.data("fullCalendar",g);g.render()});return this};O.sourceNormalizers=[];O.sourceFetchers=[];var rb={dataType:"json",cache:!1},sb=1;O.addDays=h;O.cloneDate=p;O.parseDate=r;O.parseISO8601=z;O.parseTime=T;O.formatDate=G;O.formatDates=na;var vb="sun mon tue wed thu fri sat".split(" "),tb=36E5,ub={s:function(a){return a.getSeconds()},ss:function(a){return wa(a.getSeconds())},m:function(a){return a.getMinutes()},
mm:function(a){return wa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return wa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return wa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return wa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},e:function(a,b){return b.dayNamesShortest[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return wa(a.getMonth()+
1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return G(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>
a?"th":["st","nd","rd"][a%10-1]||"th"}};O.applyAll=Ma;ma.year=function(a,b){var c=this;c.render=function(a,b){b&&(c.curYear=g(a,b));var h=p(a,!0);h.setFullYear(h.getFullYear(),0,1);var l=p(a);l.setFullYear(l.getFullYear(),11,31);var m=p(h),n=p(l),k=d("weekends")?0:1;c.title=f(h,d("titleFormat"));c.start=h;c.end=l;c.visStart=m;c.visEnd=n;e("4x3",6,k?5:7,!0)};wb.call(c,a,b,"year");var d=c.opt,e=c.renderYear,f=b.formatDate};ma.month=function(a,b){var c=this;c.render=function(a,b){b&&(m(a,b),a.setDate(1));
var g=p(a,!0);g.setDate(1);var l=m(p(g),1),n=p(g),k=p(l),q=d("firstDay"),r=d("weekends")?0:1;r&&(t(n),t(k,-1,!0));h(n,-((n.getDay()-Math.max(q,r)+7)%7));h(k,(7-k.getDay()+Math.max(q,r))%7);q=Math.round((k-n)/6048E5);"fixed"==d("weekMode")&&(h(k,7*(6-q)),q=6);c.title=f(g,d("titleFormat"));c.start=g;c.end=l;c.visStart=n;c.visEnd=k;e(6,q,r?5:7,!0)};bb.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=b.formatDate};ma.basicWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);var g=h(p(a),
-((a.getDay()-d("firstDay")+7)%7)),l=h(p(g),7),m=p(g),n=p(l),k=d("weekends");k||(t(m),t(n,-1,!0));c.title=f(m,h(p(n),-1),d("titleFormat"));c.start=g;c.end=l;c.visStart=m;c.visEnd=n;e(1,1,k?7:5,!1)};bb.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=b.formatDates};ma.basicDay=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),d("weekends")||t(a,0>b?-1:1));c.title=f(a,d("titleFormat"));c.start=c.visStart=p(a,!0);c.end=c.visEnd=h(p(c.start),1);e(1,1,1,!1)};bb.call(c,a,b,"basicDay");var d=
c.opt,e=c.renderBasic,f=b.formatDate};e({weekMode:"fixed"});ma.agendaWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);var g=h(p(a),-((a.getDay()-d("firstDay")+7)%7)),l=h(p(g),7),m=p(g),n=p(l),k=d("weekends");k||(t(m),t(n,-1,!0));c.title=f(m,h(p(n),-1),d("titleFormat"));c.start=g;c.end=l;c.visStart=m;c.visEnd=n;e(k?7:5)};ob.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=b.formatDates};ma.agendaDay=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),d("weekends")||t(a,
0>b?-1:1));var g=p(a,!0),l=h(p(g),1);c.title=f(a,d("titleFormat"));c.start=c.visStart=g;c.end=c.visEnd=l;e(1)};ob.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=b.formatDate};e({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);
(function(a){function b(a,b,c){var d=b;10>b&&(d="0"+b);if(c.isoTime)return b=a,10>b&&(b="0"+a),b+":"+d;b=a%12;0==b&&(b=12);return b+":"+d+(c.meridiemUpperCase?12>a?"AM":"PM":12>a?"am":"pm")}function e(a){if((a=a=/(\d+)\s*[:\-\.,]\s*(\d+)\s*(am|pm)?/i.exec(a))&&3<=a.length){var b=Number(a[1]),c=Number(a[2]);12==b&&a[3]&&(b-=12);a[3]&&"pm"==a[3].toLowerCase()&&(b+=12);return{hour:b,minute:c}}return null}function d(a){return a&&60*a.hour+a.minute}function c(c,g){for(var m=d(g.minTime),h=d(g.maxTime),
k=d(g.defaultTime),l=g.selection&&d(e(g.selection)),q=g.minutes,p=g.onehour,n=g.hours,l=l&&Math.floor((l-m)/g.timeInterval)*g.timeInterval+m,t,v=a("<ul></ul>"),E=m;E<=h;E+=g.timeInterval)(function(c){var d=b(Math.floor(c/60),c%60,g),e=d;if(g.showDuration)var f=c-m,e=60>f?e+(" ("+f+" "+q+")"):60==f?e+(" ("+p+")"):e+(" ("+Math.round(f/60*10)/10+" "+n+")");e=a("<li></li>").append(a('<a href="javascript:void(0);">'+e+"</a>").click(function(){g&&g.selectTime&&g.selectTime(d);return!1}).mousemove(function(){a("li.selected",
v).removeClass("selected")}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})).appendTo(v);t||c!=k||(t=e);l==c&&(e.addClass("selected").addClass("ui-state-highlight"),t=e)})(E);t&&setTimeout(function(){c[0].scrollTop=t[0].offsetTop-2*t.height()},0);c.empty().append(v)}a.fn.calendricalTime=function(b){b=b||{};b.timeInterval=b.timeInterval||30;b.padding=b.padding||4;return this.each(function(){var d=a(this),m,h=!1;d.bind("focus click",function(){if(!m){var k=
d.position();m=a("<div></div>").addClass("calendricalTimePopup ui-widget ui-widget-content").mouseenter(function(){h=!0}).mouseleave(function(){h=!1}).mousedown(function(a){a.preventDefault()}).css({position:"absolute",left:k.left,top:k.top+d.height()+2*b.padding});d.after(m);k={selection:d.val(),selectTime:function(a){h=!1;d.val(a);m.remove();m=null},isoTime:b.isoTime||!1,meridiemUpperCase:b.meridiemUpperCase||!1,defaultTime:b.defaultTime||{hour:8,minute:0},minTime:b.minTime||{hour:0,minute:0},maxTime:b.maxTime||
{hour:23,minute:59},timeInterval:b.timeInterval||30,minutes:b.minutes||"mins",onehour:b.onehour||"1 hr",hours:b.hours||"hrs"};if(b.startTime){var l=e(b.startTime.val());b.startDate&&b.endDate&&!areDatesEqual(parseDate(b.startDate.val()),parseDate(b.endDate.val()))&&(l=null);l&&(k.minTime=l,k.showDuration=!0,m.addClass("calendricalEndTimePopup"))}c(m,k)}}).blur(function(){h?m&&d.focus():m&&(m.remove(),m=null)})})};a.fn.calendricalTimeRange=function(b){2<=this.length&&(a(this[0]).calendricalTime(b),
a(this[1]).calendricalTime(a.extend({startTime:a(this[0])},b)));return this}})(jQuery);
(function(a){function b(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:!1,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showTimezone:!1,showTime:!0,stepHour:.05,stepMinute:.05,stepSecond:.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,hourMax:23,minuteMax:59,
secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,showTimepicker:!0,timezoneList:"-1100 -1000 -0900 -0800 -0700 -0600 -0500 -0400 -0300 -0200 -0100 +0000 +0100 +0200 +0300 +0400 +0500 +0600 +0700 +0800 +0900 +1000 +1100 +1200".split(" ")};a.extend(this._defaults,this.regional[""])}a.extend(a.ui,{timepicker:{version:"0.9.4"}});a.extend(b.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,
minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:"-1100 -1000 -0900 -0800 -0700 -0600 -0500 -0400 -0300 -0200 -0100 +0000 +0100 +0200 +0300 +0400 +0500 +0600 +0700 +0800 +0900 +1000 +1100 +1200".split(" "),setDefaults:function(b){var d=this._defaults;
b=b||{};a.extend(d,b);for(var c in b)if(null===b[c]||void 0===b[c])d[c]=b[c];return this},_newInst:function(e,d){var c=new b,f={},g;for(g in this._defaults){var m=e.attr("time:"+g);if(m)try{f[g]=eval(m)}catch(h){f[g]=m}}c._defaults=a.extend({},this._defaults,f,d,{beforeShow:function(b,e){a.isFunction(d.beforeShow)&&d.beforeShow(b,e,c)},onChangeMonthYear:function(b,f,g){c._updateDateTime(g);a.isFunction(d.onChangeMonthYear)&&d.onChangeMonthYear.call(e[0],b,f,g,c)},onClose:function(b,f){!0===c.timeDefined&&
""!=e.val()&&c._updateDateTime(f);a.isFunction(d.onClose)&&d.onClose.call(e[0],b,f,c)},timepicker:c});c.hour=c._defaults.hour;c.minute=c._defaults.minute;c.second=c._defaults.second;c.ampm="";c.$input=e;d.altField&&(c.$altInput=a(d.altField).css({cursor:"pointer"}).focus(function(){e.trigger("focus")}));void 0!==c._defaults.minDate&&c._defaults.minDate instanceof Date&&(c._defaults.minDateTime=new Date(c._defaults.minDate.getTime()));void 0!==c._defaults.minDateTime&&c._defaults.minDateTime instanceof
Date&&(c._defaults.minDate=new Date(c._defaults.minDateTime.getTime()));void 0!==c._defaults.maxDate&&c._defaults.maxDate instanceof Date&&(c._defaults.maxDateTime=new Date(c._defaults.maxDate.getTime()));void 0!==c._defaults.maxDateTime&&c._defaults.maxDateTime instanceof Date&&(c._defaults.maxDate=new Date(c._defaults.maxDateTime.getTime()));return c},_addTimePicker:function(a){var b=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=
this._parseTime(b);this._limitMinMaxDateTime(a,!1);this._injectTimePicker()},_parseTime:function(b,d){var c=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+"$",f=this._getFormatPositions();this.inst||(this.inst=a.datepicker._getInst(this.$input[0]));if(d||!this._defaults.timeOnly)c=".{"+a.datepicker._get(this.inst,
"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+c;return(c=b.match(new RegExp(c,"i")))?(-1!==f.t&&(this.ampm=(void 0===c[f.t]||0===c[f.t].length?"":"A"==c[f.t].charAt(0).toUpperCase()?"AM":"PM").toUpperCase()),-1!==f.h&&(this.hour="AM"==this.ampm&&"12"==c[f.h]?0:"PM"==this.ampm&&"12"!=c[f.h]?(parseFloat(c[f.h])+12).toFixed(0):Number(c[f.h])),-1!==f.m&&(this.minute=Number(c[f.m])),-1!==f.s&&(this.second=Number(c[f.s])),-1!==f.z&&(this.timezone=
c[f.z]),!0):!1},_getFormatPositions:function(){var a=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),b={h:-1,m:-1,s:-1,t:-1,z:-1};if(a)for(var c=0;c<a.length;c++)-1==b[a[c].toString().charAt(0)]&&(b[a[c].toString().charAt(0)]=c+1);return b},_injectTimePicker:function(){var b=this.inst.dpDiv,d=this._defaults,c=this,f=(d.hourMax-d.hourMax%d.stepHour).toFixed(0),g=(d.minuteMax-d.minuteMax%d.stepMinute).toFixed(0),m=(d.secondMax-d.secondMax%d.stepSecond).toFixed(0),h=
this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(0===b.find("div#ui-timepicker-div-"+h).length&&d.showTimepicker){var k='<div class="ui-timepicker-div" id="ui-timepicker-div-'+h+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+h+'"'+(d.showTime?"":' style="display:none;"')+">"+d.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+h+'"'+(d.showTime?"":' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+h+'"'+(d.showHour?
"":' style="display:none;"')+">"+d.hourText+"</dt>",l=0,q=0,p=0,n;if(d.showHour&&0<d.hourGrid){for(var k=k+('<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+h+'"'+(d.showHour?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>'),t=d.hourMin;t<f;t+=d.hourGrid){l++;var v=d.ampm&&12<t?t-12:t;10>v&&(v="0"+v);d.ampm&&(v=0==t?"12a":12>t?v+"a":v+"p");k+="<td>"+v+"</td>"}k+="</tr></table></div></dd>"}else k+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+h+'"'+(d.showHour?
"":' style="display:none;"')+"></dd>";k+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+h+'"'+(d.showMinute?"":' style="display:none;"')+">"+d.minuteText+"</dt>";if(d.showMinute&&0<d.minuteGrid){k+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+d.minuteGrid+'"><div id="ui_tpicker_minute_'+h+'"'+(d.showMinute?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(t=d.minuteMin;t<g;t+=d.minuteGrid)q++,k+="<td>"+(10>t?"0":"")+t+"</td>";k+="</tr></table></div></dd>"}else k+=
'<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+h+'"'+(d.showMinute?"":' style="display:none;"')+"></dd>";k+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+h+'"'+(d.showSecond?"":' style="display:none;"')+">"+d.secondText+"</dt>";if(d.showSecond&&0<d.secondGrid){k+='<dd class="ui_tpicker_second ui_tpicker_second_'+d.secondGrid+'"><div id="ui_tpicker_second_'+h+'"'+(d.showSecond?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(t=d.secondMin;t<
m;t+=d.secondGrid)p++,k+="<td>"+(10>t?"0":"")+t+"</td>";k+="</tr></table></div></dd>"}else k+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+h+'"'+(d.showSecond?"":' style="display:none;"')+"></dd>";k+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+h+'"'+(d.showTimezone?"":' style="display:none;"')+">"+d.timezoneText+"</dt>";k+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+h+'"'+(d.showTimezone?"":' style="display:none;"')+"></dd>";$tp=a(k+"</dl></div>");
!0===d.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+d.timeOnlyTitle+"</div></div>"),b.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());this.hour_slider=$tp.find("#ui_tpicker_hour_"+h).slider({orientation:"horizontal",value:this.hour,min:d.hourMin,max:f,step:d.stepHour,slide:function(a,b){c.hour_slider.slider("option","value",b.value);c._onTimeChange()}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+h).slider({orientation:"horizontal",
value:this.minute,min:d.minuteMin,max:g,step:d.stepMinute,slide:function(a,b){c.minute_slider.slider("option","value",b.value);c._onTimeChange()}});this.second_slider=$tp.find("#ui_tpicker_second_"+h).slider({orientation:"horizontal",value:this.second,min:d.secondMin,max:m,step:d.stepSecond,slide:function(a,b){c.second_slider.slider("option","value",b.value);c._onTimeChange()}});this.timezone_select=$tp.find("#ui_tpicker_timezone_"+h).append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,
a.map(d.timezoneList,function(b,c){return a("<option />").val("object"==typeof b?b.value:b).text("object"==typeof b?b.label:b)}));this.timezone_select.val("undefined"!=typeof this.timezone&&null!=this.timezone&&""!=this.timezone?this.timezone:d.timezone);this.timezone_select.change(function(){c._onTimeChange()});d.showHour&&0<d.hourGrid&&(n=100*l*d.hourGrid/(f-d.hourMin),$tp.find(".ui_tpicker_hour table").css({width:n+"%",marginLeft:n/(-2*l)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){var b=
a(this).html();if(d.ampm)var e=b.substring(2).toLowerCase(),b=parseInt(b.substring(0,2)),b="a"==e?12==b?0:b:12==b?12:b+12;c.hour_slider.slider("option","value",b);c._onTimeChange();c._onSelectHandler()}).css({cursor:"pointer",width:100/l+"%",textAlign:"center",overflow:"hidden"})}));d.showMinute&&0<d.minuteGrid&&(n=100*q*d.minuteGrid/(g-d.minuteMin),$tp.find(".ui_tpicker_minute table").css({width:n+"%",marginLeft:n/(-2*q)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){c.minute_slider.slider("option",
"value",a(this).html());c._onTimeChange();c._onSelectHandler()}).css({cursor:"pointer",width:100/q+"%",textAlign:"center",overflow:"hidden"})}));d.showSecond&&0<d.secondGrid&&$tp.find(".ui_tpicker_second table").css({width:n+"%",marginLeft:n/(-2*p)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){c.second_slider.slider("option","value",a(this).html());c._onTimeChange();c._onSelectHandler()}).css({cursor:"pointer",width:100/p+"%",textAlign:"center",overflow:"hidden"})});
f=b.find(".ui-datepicker-buttonpane");f.length?f.before($tp):b.append($tp);this.$timeObj=$tp.find("#ui_tpicker_time_"+h);null!==this.inst&&(b=this.timeDefined,this._onTimeChange(),this.timeDefined=b);b=function(){c._onSelectHandler()};this.hour_slider.bind("slidestop",b);this.minute_slider.bind("slidestop",b);this.second_slider.bind("slidestop",b)}},_limitMinMaxDateTime:function(a,b){var c=this._defaults,f=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(this._defaults.showTimepicker){if(null!==
this._defaults.minDateTime&&f){var g=this._defaults.minDateTime,m=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal)this.hourMinOriginal=c.hourMin,this.minuteMinOriginal=c.minuteMin,this.secondMinOriginal=c.secondMin;a.settings.timeOnly||m.getTime()==f.getTime()?(this._defaults.hourMin=g.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=g.getMinutes(),
this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=g.getSeconds()):(this.second<this._defaults.secondMin&&(this.second=this._defaults.secondMin),this._defaults.secondMin=this.secondMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal)}if(null!==this._defaults.maxDateTime&&
f){g=this._defaults.maxDateTime;m=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)this.hourMaxOriginal=c.hourMax,this.minuteMaxOriginal=c.minuteMax,this.secondMaxOriginal=c.secondMax;a.settings.timeOnly||m.getTime()==f.getTime()?(this._defaults.hourMax=g.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=g.getMinutes(),this.minute>=this._defaults.minuteMax?
(this.minute=this._defaults.minuteMax,this._defaults.secondMin=g.getSeconds()):(this.second>this._defaults.secondMax&&(this.second=this._defaults.secondMax),this._defaults.secondMax=this.secondMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal)}void 0!==b&&!0===b&&(this.hour_slider.slider("option",
{min:this._defaults.hourMin,max:this._defaults.hourMax}).slider("value",this.hour),this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:this._defaults.minuteMax}).slider("value",this.minute),this.second_slider.slider("option",{min:this._defaults.secondMin,max:this._defaults.secondMax}).slider("value",this.second))}},_onTimeChange:function(){var a=this.hour_slider?this.hour_slider.slider("value"):!1,b=this.minute_slider?this.minute_slider.slider("value"):!1,c=this.second_slider?this.second_slider.slider("value"):
!1,f=this.timezone_select?this.timezone_select.val():!1;!1!==a&&(a=parseInt(a,10));!1!==b&&(b=parseInt(b,10));!1!==c&&(c=parseInt(c,10));var g=12>a?"AM":"PM",m=a!=this.hour||b!=this.minute||c!=this.second||0<this.ampm.length&&this.ampm!=g||f!=this.timezone;m&&(!1!==a&&(this.hour=a),!1!==b&&(this.minute=b),!1!==c&&(this.second=c),!1!==f&&(this.timezone=f),this._limitMinMaxDateTime(this.inst,!0));this._defaults.ampm&&(this.ampm=g);this._formatTime();this.$timeObj&&this.$timeObj.text(this.formattedTime);
this.timeDefined=!0;m&&this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_formatTime:function(b,d,c){void 0==c&&(c=this._defaults.ampm);b=b||{hour:this.hour,minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var f=d||this._defaults.timeFormat.toString();if(c)var g="AM"==b.ampm?b.hour:b.hour%12,g=0===Number(g)?12:g,f=f.toString().replace(/hh/g,(10>g?"0":"")+g).replace(/h/g,
g).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?"0":"")+b.second).replace(/s/g,b.second).replace(/TT/g,b.ampm.toUpperCase()).replace(/tt/g,b.ampm.toLowerCase()).replace(/T/g,b.ampm.charAt(0).toUpperCase()).replace(/t/g,b.ampm.charAt(0).toLowerCase()).replace(/z/g,b.timezone);else f=f.toString().replace(/hh/g,(10>b.hour?"0":"")+b.hour).replace(/h/g,b.hour).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?
"0":"")+b.second).replace(/s/g,b.second).replace(/z/g,b.timezone),f=a.trim(f.replace(/t/gi,""));if(arguments.length)return f;this.formattedTime=f},_updateDateTime:function(b){b=this.inst||b;dt=new Date(b.selectedYear,b.selectedMonth,b.selectedDay);dateFmt=a.datepicker._get(b,"dateFormat");formatCfg=a.datepicker._getFormatConfig(b);timeAvailable=null!==dt&&this.timeDefined;var d=this.formattedDate=a.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);void 0!==b.lastVal&&0<b.lastVal.length&&
0===this.$input.val().length||(!0===this._defaults.timeOnly?d=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||timeAvailable)&&(d+=this._defaults.separator+this.formattedTime),this.formattedDateTime=d,this._defaults.showTimepicker?this.$altInput&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):(this.$altInput&&this.$altInput.val(d),this.$input.val(d)):this.$input.val(this.formattedDate),this.$input.trigger("change"))}});
a.fn.extend({timepicker:function(b){b=b||{};var d=arguments;"object"==typeof b&&(d[0]=a.extend(b,{timeOnly:!0}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),d)})},datetimepicker:function(b){b=b||{};var d=arguments;return"string"==typeof b?"getDate"==b?a.fn.datepicker.apply(a(this[0]),d):this.each(function(){var b=a(this);b.datepicker.apply(b,d)}):this.each(function(){var c=a(this);c.datepicker(a.timepicker._newInst(c,b)._defaults)})}});a.datepicker._base_selectDate=a.datepicker._selectDate;
a.datepicker._selectDate=function(b,d){var c=this._getInst(a(b)[0]),f=this._get(c,"timepicker");f?(f._limitMinMaxDateTime(c,!0),c.inline=c.stay_open=!0,this._base_selectDate(b,d+f._defaults.separator+f.formattedTime),c.inline=c.stay_open=!1,this._notifyChange(c),this._updateDatepicker(c)):this._base_selectDate(b,d)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(a){if("boolean"!==typeof a.stay_open||!1===a.stay_open){this._base_updateDatepicker(a);
var b=this._get(a,"timepicker");b&&b._addTimePicker(a)}};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(b){var d=a.datepicker._getInst(b.target),c=a.datepicker._get(d,"timepicker");if(c&&a.datepicker._get(d,"constrainInput")){var f=c._defaults.ampm,d=c._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,f?"APM":"").replace(/T/g,f?"AP":"").replace(/tt/g,f?"apm":"").replace(/t/g,f?"ap":"")+" "+c._defaults.separator+a.datepicker._possibleChars(a.datepicker._get(d,
"dateFormat")),c=String.fromCharCode(void 0===b.charCode?b.keyCode:b.charCode);return b.ctrlKey||" ">c||!d||-1<d.indexOf(c)}return a.datepicker._base_doKeyPress(b)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;a.datepicker._doKeyUp=function(b){var d=a.datepicker._getInst(b.target),c=a.datepicker._get(d,"timepicker");if(c&&c._defaults.timeOnly&&d.input.val()!=d.lastVal)try{a.datepicker._updateDatepicker(d)}catch(f){a.datepicker.log(f)}return a.datepicker._base_doKeyUp(b)};a.datepicker._base_gotoToday=
a.datepicker._gotoToday;a.datepicker._gotoToday=function(b){this._base_gotoToday(b);this._setTime(this._getInst(a(b)[0]),new Date)};a.datepicker._disableTimepickerDatepicker=function(b,d,c){d=this._getInst(b);c=this._get(d,"timepicker");a(b).datepicker("getDate");c&&(c._defaults.showTimepicker=!1,c._updateDateTime(d))};a.datepicker._enableTimepickerDatepicker=function(b,d,c){d=this._getInst(b);c=this._get(d,"timepicker");a(b).datepicker("getDate");c&&(c._defaults.showTimepicker=!0,c._addTimePicker(d),
c._updateDateTime(d))};a.datepicker._setTime=function(a,b){var c=this._get(a,"timepicker");if(c){var f=c._defaults,g=b?b.getHours():f.hour,m=b?b.getMinutes():f.minute,h=b?b.getSeconds():f.second;if(g<f.hourMin||g>f.hourMax||m<f.minuteMin||m>f.minuteMax||h<f.secondMin||h>f.secondMax)g=f.hourMin,m=f.minuteMin,h=f.secondMin;c.hour_slider?c.hour_slider.slider("value",g):c.hour=g;c.minute_slider?c.minute_slider.slider("value",m):c.minute=m;c.second_slider?c.second_slider.slider("value",h):c.second=h;c._onTimeChange();
c._updateDateTime(a)}};a.datepicker._setTimeDatepicker=function(a,b,c){a=this._getInst(a);var f=this._get(a,"timepicker");f&&(this._setDateFromField(a),b&&("string"==typeof b?(f._parseTime(b,c),b=new Date,b.setHours(f.hour,f.minute,f.second)):b=new Date(b.getTime()),"Invalid Date"==b.toString()&&(b=void 0),this._setTime(a,b)))};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(a,b){var c=this._getInst(a),f=b instanceof Date?new Date(b.getTime()):
b;this._updateDatepicker(c);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,f,!0)};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(b,d){var c=this._getInst(b),f=this._get(c,"timepicker");return f?(this._setDateFromField(c,d),(c=this._getDate(c))&&f._parseTime(a(b).val(),!0)&&c.setHours(f.hour,f.minute,f.second),c):this._base_getDateDatepicker(b,d)};a.timepicker=new b;a.timepicker.version="0.9.4"})(jQuery);
(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var b=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_init:function(){var e=this;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+b++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(a){e.open(a)}).bind("blur.tooltip mouseleave.tooltip",function(a){e.close(a)})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.tooltip},open:function(a){var b=
this.element;if(!this.current||this.current[0]!=b[0]){var c=this;this.current=b;this.currentTitle=b.attr("title");var f=this.options.content.call(b[0],function(f){c.current==b&&c._show(a,b,f)});f&&c._show(a,b,f)}},_show:function(b,d,c){c&&(d.attr("title",""),this.options.disabled||(this.tooltipContent.html(c),this.tooltip.css({top:0,left:0}).show().position(a.extend(this.options.position,{of:d})).hide(),this.tooltip.attr("aria-hidden","false"),d.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.is(":animated")?
this.tooltip.stop().show().fadeTo("normal",this.opacity):this.tooltip.is(":visible")?this.tooltip.fadeTo("normal",this.opacity):this.tooltip.fadeIn(),this._trigger("open",b)))},close:function(b){this.current&&(this.current.attr("title",this.currentTitle),this.options.disabled||(this.current.removeAttr("aria-describedby"),this.current=null,this.tooltip.attr("aria-hidden","true"),this.tooltip.is(":animated")?this.tooltip.stop().fadeTo("normal",0,function(){a(this).hide().css("opacity","")}):this.tooltip.stop().fadeOut(),
this._trigger("close",b)))}})})(jQuery);
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{guid:1,uidPref:"jqg",randId:function(b){return(b?b:a.jgrid.uidPref)+a.jgrid.guid++}});a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(b,e){e=a.extend({jqm:!0,gb:""},e||{});if(e.onClose){var d=e.onClose(b);if("boolean"==typeof d&&!d)return}if(a.fn.jqm&&!0===e.jqm)a(b).attr("aria-hidden","true").jqmHide();else{if(""!==e.gb)try{a(".jqgrid-overlay:first",
e.gb).hide()}catch(c){}a(b).hide().attr("aria-hidden","true")}},findPos:function(a){var e=0,d=0;if(a.offsetParent){do e+=a.offsetLeft,d+=a.offsetTop;while(a=a.offsetParent)}return[e,d]},createModal:function(b,e,d,c,f,g,m){var h=document.createElement("div"),k,l=this;m=a.extend({},m||{});k="rtl"==a(d.gbox).attr("dir")?!0:!1;h.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";h.id=b.themodal;var q=document.createElement("div");q.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
q.id=b.modalhead;a(q).append("<span class='ui-jqdialog-title'>"+d.caption+"</span>");var p=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){p.addClass("ui-state-hover")},function(){p.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(q).append(p);k?(h.dir="rtl",a(".ui-jqdialog-title",q).css("float","right"),a(".ui-jqdialog-titlebar-close",q).css("left","0.3em")):(h.dir="ltr",a(".ui-jqdialog-title",q).css("float",
"left"),a(".ui-jqdialog-titlebar-close",q).css("right","0.3em"));var n=document.createElement("div");a(n).addClass("ui-jqdialog-content ui-widget-content").attr("id",b.modalcontent);a(n).append(e);h.appendChild(n);a(h).prepend(q);!0===g?a("body").append(h):"string"==typeof g?a(g).append(h):a(h).insertBefore(c);a(h).css(m);"undefined"===typeof d.jqModal&&(d.jqModal=!0);e={};if(a.fn.jqm&&!0===d.jqModal)0===d.left&&0===d.top&&d.overlay&&(m=[],m=this.findPos(f),d.left=m[0]+4,d.top=m[1]+4),e.top=d.top+
"px",e.left=d.left;else if(0!==d.left||0!==d.top)e.left=d.left,e.top=d.top+"px";a("a.ui-jqdialog-titlebar-close",q).click(function(c){c=a("#"+b.themodal).data("onClose")||d.onClose;var e=a("#"+b.themodal).data("gbox")||d.gbox;l.hideModal("#"+b.themodal,{gb:e,jqm:d.jqModal,onClose:c});return!1});0!==d.width&&d.width||(d.width=300);0!==d.height&&d.height||(d.height=200);d.zIndex||(c=a(c).parents("*[role=dialog]").filter(":first").css("z-index"),d.zIndex=c?parseInt(c,10)+1:950);c=0;k&&e.left&&!g&&(c=
a(d.gbox).width()-(isNaN(d.width)?0:parseInt(d.width,10))-8,e.left=parseInt(e.left,10)+parseInt(c,10));e.left&&(e.left+="px");a(h).css(a.extend({width:isNaN(d.width)?"auto":d.width+"px",height:isNaN(d.height)?"auto":d.height+"px",zIndex:d.zIndex,overflow:"hidden"},e)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"});"undefined"==typeof d.drag&&(d.drag=!0);"undefined"==typeof d.resize&&(d.resize=!0);if(d.drag)if(a(q).css("cursor","move"),a.fn.jqDrag)a(h).jqDrag(q);
else try{a(h).draggable({handle:a("#"+q.id)})}catch(t){}if(d.resize)if(a.fn.jqResize)a(h).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),a("#"+b.themodal).jqResize(".jqResize",b.scrollelm?"#"+b.scrollelm:!1);else try{a(h).resizable({handles:"se, sw",alsoResize:b.scrollelm?"#"+b.scrollelm:!1})}catch(t){}!0===d.closeOnEscape&&a(h).keydown(function(c){27==c.which&&(c=a("#"+b.themodal).data("onClose")||d.onClose,
l.hideModal(this,{gb:d.gbox,jqm:d.jqModal,onClose:c}))})},viewModal:function(b,e){e=a.extend({toTop:!0,overlay:10,modal:!1,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},e||{});if(a.fn.jqm&&!0===e.jqm)e.jqM?a(b).attr("aria-hidden","false").jqm(e).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else{""!==e.gbox&&(a(".jqgrid-overlay:first",e.gbox).show(),a(b).data("gbox",e.gbox));a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(d){}}},info_dialog:function(b,
e,d,c){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+b+"</b>",left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(f,c||{});var g=f.jqModal,m=this;a.fn.jqm&&!g&&(g=!1);b="";if(0<f.buttons.length)for(c=0;c<f.buttons.length;c++)"undefined"==typeof f.buttons[c].id&&(f.buttons[c].id="info_button_"+c),b+="<a href='javascript:void(0)' id='"+f.buttons[c].id+"' class='fm-button ui-state-default ui-corner-all'>"+
f.buttons[c].text+"</a>";c=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px";e="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+c+";"+("text-align:"+f.align+";")+"'>"+e+"</div>");e+=d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
d+"</a>"+b+"</div>":""!==b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+b+"</div>":"";e+="</div>";try{"false"==a("#info_dialog").attr("aria-hidden")&&this.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(h){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},e,f,"","",!0);b&&a.each(f.buttons,
function(b){a("#"+this.id,"#info_id").bind("click",function(){f.buttons[b].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").click(function(a){m.hideModal("#info_dialog",{jqm:g});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(f.beforeOpen)&&f.beforeOpen();this.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:f.modal,jqm:g});
a.isFunction(f.afterOpen)&&f.afterOpen();try{a("#info_dialog").focus()}catch(h){}},createEl:function(b,e,d,c,f){function g(b,c){a.isFunction(c.dataInit)&&c.dataInit(b);c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)});return c}function m(b,c,d){var e="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr".split(" ");"undefined"!=typeof d&&a.isArray(d)&&(e=a.extend(e,d));a.each(c,function(c,d){-1===
a.inArray(c,e)&&a(b).attr(c,d)});c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="";switch(b){case "textarea":h=document.createElement("textarea");c?e.cols||a(h).css({width:"98%"}):e.cols||(e.cols=20);e.rows||(e.rows=2);if("&nbsp;"==d||"&#160;"==d||1==d.length&&160==d.charCodeAt(0))d="";h.value=d;m(h,e);e=g(h,e);a(h).attr({role:"textbox",multiline:"true"});break;case "checkbox":h=document.createElement("input");h.type="checkbox";e.value?(b=e.value.split(":"),d===b[0]&&(h.checked=!0,
h.defaultChecked=!0),h.value=b[0],a(h).attr("offval",b[1])):(b=d.toLowerCase(),0>b.search(/(false|0|no|off|undefined)/i)&&""!==b?(h.checked=!0,h.defaultChecked=!0,h.value=d):h.value="on",a(h).attr("offval","off"));m(h,e,["value"]);e=g(h,e);a(h).attr("role","checkbox");break;case "select":h=document.createElement("select");h.setAttribute("role","select");c=[];!0===e.multiple?(b=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):b=!1;if("undefined"!=typeof e.dataUrl)a.ajax(a.extend({url:e.dataUrl,
type:"GET",dataType:"html",context:{elem:h,options:e,vl:d},success:function(b,c){var d,e=[],f=this.elem,h=this.vl,l=a.extend({},this.options),k=!0===l.multiple;"undefined"!=typeof l.buildSelect?(d=l.buildSelect(b),d=a(d).html()):d=a(b).html();d&&(a(f).append(d),m(f,l),l=g(f,l),"undefined"===typeof l.size&&(l.size=k?3:1),k?(e=h.split(","),e=a.map(e,function(b){return a.trim(b)})):e[0]=a.trim(h),setTimeout(function(){a("option",f).each(function(b){a(this).attr("role","option");if(-1<a.inArray(a.trim(a(this).text()),
e)||-1<a.inArray(a.trim(a(this).val()),e))this.selected="selected"})},0))}},f||{}));else if(e.value){var k;b?(c=d.split(","),c=a.map(c,function(b){return a.trim(b)}),"undefined"===typeof e.size&&(e.size=3)):e.size=1;"function"===typeof e.value&&(e.value=e.value());var l,q;if("string"===typeof e.value)for(l=e.value.split(";"),k=0;k<l.length;k++)q=l[k].split(":"),2<q.length&&(q[1]=a.map(q,function(a,b){if(0<b)return a}).join(":")),f=document.createElement("option"),f.setAttribute("role","option"),f.value=
q[0],f.innerHTML=q[1],b||a.trim(q[0])!=a.trim(d)&&a.trim(q[1])!=a.trim(d)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(q[1]),c)||-1<a.inArray(a.trim(q[0]),c))&&(f.selected="selected"),h.appendChild(f);else if("object"===typeof e.value)for(k in l=e.value,l)l.hasOwnProperty(k)&&(f=document.createElement("option"),f.setAttribute("role","option"),f.value=k,f.innerHTML=l[k],b||a.trim(k)!=a.trim(d)&&a.trim(l[k])!=a.trim(d)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(l[k]),c)||-1<a.inArray(a.trim(k),
c))&&(f.selected="selected"),h.appendChild(f));m(h,e,["value"]);e=g(h,e)}break;case "text":case "password":case "button":k="button"==b?"button":"textbox";h=document.createElement("input");h.type=b;h.value=d;m(h,e);e=g(h,e);"button"!=b&&(c?e.size||a(h).css({width:"98%"}):e.size||(e.size=20));a(h).attr("role",k);break;case "image":case "file":h=document.createElement("input");h.type=b;m(h,e);e=g(h,e);break;case "custom":h=document.createElement("span");try{if(a.isFunction(e.custom_element))if(l=e.custom_element.call(this,
d,e))l=a(l).addClass("customelement").attr({id:e.id,name:e.name}),a(h).empty().append(l);else throw"e2";else throw"e1";}catch(p){"e1"==p&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"==p?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):this.info_dialog(a.jgrid.errors.errcap,"string"===typeof p?p:p.message,a.jgrid.edit.bClose)}}return h},checkDate:function(a,e){var d=
function(a){return 0!==a%4||0===a%100&&0!==a%400?28:29},c={},f;a=a.toLowerCase();f=-1!=a.indexOf("/")?"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/";a=a.split(f);e=e.split(f);if(3!=e.length)return!1;f=-1;for(var g,m=-1,h=-1,k=0;k<a.length;k++)g=isNaN(e[k])?0:parseInt(e[k],10),c[a[k]]=g,g=a[k],-1!=g.indexOf("y")&&(f=k),-1!=g.indexOf("m")&&(h=k),-1!=g.indexOf("d")&&(m=k);g="y"==a[f]||"yyyy"==a[f]?4:"yy"==a[f]?2:-1;var k=function(a){for(var b=1;b<=a;b++){this[b]=31;if(4==b||6==b||9==b||11==b)this[b]=
30;2==b&&(this[b]=29)}return this}(12),l;if(-1===f)return!1;l=c[a[f]].toString();2==g&&1==l.length&&(g=1);if(l.length!=g||0===c[a[f]]&&"00"!=e[f]||-1===h)return!1;l=c[a[h]].toString();if(1>l.length||1>c[a[h]]||12<c[a[h]]||-1===m)return!1;l=c[a[m]].toString();return 1>l.length||1>c[a[m]]||31<c[a[m]]||2==c[a[h]]&&c[a[m]]>d(c[a[f]])||c[a[m]]>k[c[a[h]]]?!1:!0},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var e=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(a))if(a=
a.match(e)){if(a[3]){if(1>a[1]||12<a[1])return!1}else if(23<a[1])return!1;if(59<a[2])return!1}else return!1;return!0},checkValues:function(b,e,d,c,f){var g,m;if("undefined"===typeof c)if("string"==typeof e)for(c=0,f=d.p.colModel.length;c<f;c++){if(d.p.colModel[c].name==e){g=d.p.colModel[c].editrules;e=c;try{m=d.p.colModel[c].formoptions.label}catch(h){}break}}else 0<=e&&(g=d.p.colModel[e].editrules);else g=c,m=void 0===f?"_":f;if(g){m||(m=d.p.colNames[e]);if(!0===g.required&&this.isEmpty(b))return[!1,
m+": "+a.jgrid.edit.msg.required,""];c=!1===g.required?!1:!0;if(!0===g.number&&(!1!==c||!this.isEmpty(b))&&isNaN(b))return[!1,m+": "+a.jgrid.edit.msg.number,""];if("undefined"!=typeof g.minValue&&!isNaN(g.minValue)&&parseFloat(b)<parseFloat(g.minValue))return[!1,m+": "+a.jgrid.edit.msg.minValue+" "+g.minValue,""];if("undefined"!=typeof g.maxValue&&!isNaN(g.maxValue)&&parseFloat(b)>parseFloat(g.maxValue))return[!1,m+": "+a.jgrid.edit.msg.maxValue+" "+g.maxValue,""];if(!(!0!==g.email||!1===c&&this.isEmpty(b)||
(f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
f.test(b))))return[!1,m+": "+a.jgrid.edit.msg.email,""];if(!(!0!==g.integer||!1===c&&this.isEmpty(b)||!isNaN(b)&&0===b%1&&-1==b.indexOf(".")))return[!1,m+": "+a.jgrid.edit.msg.integer,""];if(!(!0!==g.date||!1===c&&this.isEmpty(b)||(e=d.p.colModel[e].formatoptions&&d.p.colModel[e].formatoptions.newformat?d.p.colModel[e].formatoptions.newformat:d.p.colModel[e].datefmt||"Y-m-d",this.checkDate(e,b))))return[!1,m+": "+a.jgrid.edit.msg.date+" - "+e,""];if(!0===g.time&&!(!1===c&&this.isEmpty(b)||this.checkTime(b)))return[!1,
m+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!(!0!==g.url||!1===c&&this.isEmpty(b)||(f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,f.test(b))))return[!1,m+": "+a.jgrid.edit.msg.url,""];if(!0===g.custom&&(!1!==c||!this.isEmpty(b)))return a.isFunction(g.custom_func)?(b=g.custom_func.call(d,b,m),a.isArray(b)?b:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})})(jQuery);
(function(a){a.fn.jqFilter=function(b){if("string"===typeof b){var e=a.fn.jqFilter[b];if(!e)throw"jqFilter - No such method: "+b;var d=a.makeArray(arguments).slice(1);return e.apply(this,d)}var c=a.extend(!0,{filter:null,columns:[],onChange:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",
operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",
description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),_gridsopt:[],groupOps:["AND","OR"],groupButton:!0},b||{});return this.each(function(){if(!this.filter){this.p=c;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]};var b,
d=this.p.columns.length,e,h=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(b=0;b<this.p._gridsopt.length;b++)this.p.ops[b].description=this.p._gridsopt[b];this.p.initFilter=a.extend(!0,{},this.p.filter);if(d){for(b=0;b<d;b++)e=this.p.columns[b],e.stype?e.inputtype=e.stype:e.inputtype||(e.inputtype="text"),e.sorttype?e.searchtype=e.sorttype:e.searchtype||(e.searchtype="string"),void 0===e.hidden&&(e.hidden=!1),e.label||(e.label=e.name),e.index&&(e.name=e.index),e.hasOwnProperty("searchoptions")||
(e.searchoptions={}),e.hasOwnProperty("searchrules")||(e.searchrules={});this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var k=function(b,d){var e=[!0,""];if(a.isFunction(d.searchrules))e=d.searchrules(b,d);else if(a.jgrid&&a.jgrid.checkValues)try{e=a.jgrid.checkValues(b,-1,null,d.searchrules,d.label)}catch(f){}e&&e.length&&!1===e[0]&&(c.error=!e[0],
c.errmsg=e[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(c.filter,null);a(this).append(b)};this.createTableForGroup=function(b,d){var e=this,f,h=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");null===d&&a(h).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");
var g=a("<tr></tr>");a(h).append(g);var k=a("<th colspan='5' align='left'></th>");g.append(k);var m=a("<select class='opsel'></select>");k.append(m);var g="",z;for(f=0;f<c.groupOps.length;f++)z=b.groupOp===e.p.groupOps[f]?" selected='selected'":"",g+="<option value='"+e.p.groupOps[f]+"'"+z+">"+e.p.groupOps[f]+"</option>";m.append(g).bind("change",function(){b.groupOp=a(m).val();e.onchange()});g="<span></span>";this.p.groupButton&&(g=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),
g.bind("click",function(){void 0===b.groups&&(b.groups=[]);b.groups.push({groupOp:c.groupOps[0],rules:[],groups:[]});e.reDraw();e.onchange();return!1}));k.append(g);var g=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),T;g.bind("click",function(){void 0===b.rules&&(b.rules=[]);for(f=0;f<e.p.columns.length;f++){var a="undefined"===typeof e.p.columns[f].search?!0:e.p.columns[f].search,c=!0===e.p.columns[f].hidden;if(!0===e.p.columns[f].searchoptions.searchhidden&&a||a&&
!c){T=e.p.columns[f];break}}b.rules.push({field:T.name,op:(T.searchoptions.sopt?T.searchoptions.sopt:e.p.sopt?e.p.sopt:"string"===T.searchtype?e.p.stropts:e.p.numopts)[0],data:""});e.reDraw();return!1});k.append(g);null!==d&&(g=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),k.append(g),g.bind("click",function(){for(f=0;f<d.groups.length;f++)if(d.groups[f]===b){d.groups.splice(f,1);break}e.reDraw();e.onchange();return!1}));if(void 0!==b.groups)for(f=0;f<b.groups.length;f++)k=
a("<tr></tr>"),h.append(k),g=a("<td class='first'></td>"),k.append(g),g=a("<td colspan='4'></td>"),g.append(this.createTableForGroup(b.groups[f],b)),k.append(g);void 0===b.groupOp&&(b.groupOp=e.p.groupOps[0]);if(void 0!==b.rules)for(f=0;f<b.rules.length;f++)h.append(this.createTableRowForRule(b.rules[f],b));return h};this.createTableRowForRule=function(b,d){var e=this,f=a("<tr></tr>"),g,k,m,r,z="",T;f.append("<td class='first'></td>");var G=a("<td class='columns'></td>");f.append(G);var na=a("<select></select>"),
U,ca=[];G.append(na);na.bind("change",function(){b.field=a(na).val();m=a(this).parents("tr:first");for(g=0;g<e.p.columns.length;g++)if(e.p.columns[g].name===b.field){r=e.p.columns[g];break}if(r){r.searchoptions.id=a.jgrid.randId();h&&"text"===r.inputtype&&!r.searchoptions.size&&(r.searchoptions.size=10);var c=a.jgrid.createEl(r.inputtype,r.searchoptions,"",!0,e.p.ajaxSelectOptions,!0);a(c).addClass("input-elm");k=r.searchoptions.sopt?r.searchoptions.sopt:e.p.sopt?e.p.sopt:"string"===r.searchtype?
e.p.stropts:e.p.numopts;var d="",f="";ca=[];a.each(e.p.ops,function(){ca.push(this.name)});for(g=0;g<k.length;g++)U=a.inArray(k[g],ca),-1!==U&&(f="",0===g&&(b.op=e.p.ops[U].name,f=" selected='selected'"),d+="<option value='"+e.p.ops[U].name+"'"+f+">"+e.p.ops[U].description+"</option>");a(".selectopts",m).empty().append(d);a(".data",m).empty().append(c);a(".input-elm",m).bind("change",function(){b.data=a(this).val();e.onchange()});setTimeout(function(){b.data=a(c).val();e.onchange()},0)}});for(g=G=
0;g<e.p.columns.length;g++){T="undefined"===typeof e.p.columns[g].search?!0:e.p.columns[g].search;var Ea=!0===e.p.columns[g].hidden;if(!0===e.p.columns[g].searchoptions.searchhidden&&T||T&&!Ea)T="",b.field===e.p.columns[g].name&&(T=" selected='selected'",G=g),z+="<option value='"+e.p.columns[g].name+"'"+T+">"+e.p.columns[g].label+"</option>"}na.append(z);z=a("<td class='operators'></td>");f.append(z);r=c.columns[G];r.searchoptions.id=a.jgrid.randId();h&&"text"===r.inputtype&&!r.searchoptions.size&&
(r.searchoptions.size=10);var G=a.jgrid.createEl(r.inputtype,r.searchoptions,b.data,!0,e.p.ajaxSelectOptions,!0),da=a("<select class='selectopts'></select>");z.append(da);da.bind("change",function(){b.op=a(da).val();m=a(this).parents("tr:first");var c=a(".input-elm",m)[0];"nu"===b.op||"nn"===b.op?(b.data="",c.value="",c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):(c.removeAttribute("readonly"),c.removeAttribute("disabled"));e.onchange()});k=r.searchoptions.sopt?r.searchoptions.sopt:
e.p.sopt?e.p.sopt:"string"===r.searchtype?c.stropts:e.p.numopts;z="";a.each(e.p.ops,function(){ca.push(this.name)});for(g=0;g<k.length;g++)U=a.inArray(k[g],ca),-1!==U&&(T=b.op===e.p.ops[U].name?" selected='selected'":"",z+="<option value='"+e.p.ops[U].name+"'"+T+">"+e.p.ops[U].description+"</option>");da.append(z);z=a("<td class='data'></td>");f.append(z);z.append(G);a(G).addClass("input-elm").bind("change",function(){b.data=a(this).val();e.onchange()});z=a("<td></td>");f.append(z);G=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");
z.append(G);G.bind("click",function(){for(g=0;g<d.rules.length;g++)if(d.rules[g]===b){d.rules.splice(g,1);break}e.reDraw();e.onchange();return!1});return f};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(d){alert(d)}b+=")";
return"()"===b?"":b};this.getStringForRule=function(b){var d="",e="",f,g;for(f=0;f<this.p.ops.length;f++)if(this.p.ops[f].name===b.op){d=this.p.ops[f].operator;e=this.p.ops[f].name;break}for(f=0;f<this.p.columns.length;f++)if(this.p.columns[f].name===b.field){g=this.p.columns[f];break}f=b.data;if("bw"===e||"bn"===e)f+="%";if("ew"===e||"en"===e)f="%"+f;if("cn"===e||"nc"===e)f="%"+f+"%";if("in"===e||"ni"===e)f=" ("+f+")";c.errorcheck&&k(b.data,g);return-1!==a.inArray(g.searchtype,["int","integer","float",
"number","currency"])||"nn"===e||"nu"===e?b.field+" "+d+" "+f:b.field+" "+d+' "'+f+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(c.filter)};this.toString=function(){function a(c){var d=
"(",e;if(void 0!==c.groups)for(e=0;e<c.groups.length;e++)1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && "),d+=a(c.groups[e]);if(void 0!==c.rules)for(e=0;e<c.rules.length;e++){1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && ");var f=c.rules[e];if(b.p.errorcheck){for(var g=void 0,h=void 0,g=0;g<b.p.columns.length;g++)if(b.p.columns[g].name===f.field){h=b.p.columns[g];break}h&&k(f.data,h)}d+=f.op+"(item."+f.field+",'"+f.data+"')"}d+=")";return"()"===d?"":d}var b=this;return a(this.p.filter)};this.reDraw();
if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=jQuery.jgrid.parse(a));this.each(function(){this.p.filter=
a;this.reDraw();this.onchange()})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var e=this.removeWhite(a),e=this.toObj(e),e=this.toJson(e,a.nodeName,"\t");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var e=function(a,b,c){var d="",k,l;if(a instanceof Array)if(0===a.length)d+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(k=0,l=a.length;k<l;k+=1)var q=c+e(a[k],b,c+"\t")+"\n",d=d+q;else if("object"===typeof a){k=!1;d+=c+"<"+b;for(l in a)a.hasOwnProperty(l)&&
("@"===l.charAt(0)?d+=" "+l.substr(1)+'="'+a[l].toString()+'"':k=!0);d+=k?">":"/>";if(k){for(l in a)a.hasOwnProperty(l)&&("#text"===l?d+=a[l]:"#cdata"===l?d+="<![CDATA["+a[l]+"]]\x3e":"@"!==l.charAt(0)&&(d+=e(a[l],l,c+"\t")));d+=("\n"===d.charAt(d.length-1)?c:"")+"</"+b+">"}}else d="function"===typeof a?d+(c+"<"+b+"><![CDATA["+a+"]]\x3e</"+b+">"):'""'===a.toString()||0===a.toString().length?d+(c+"<"+b+">__EMPTY_STRING_</"+b+">"):d+(c+"<"+b+">"+a.toString()+"</"+b+">");return d},d="",c;for(c in a)a.hasOwnProperty(c)&&
(d+=e(a[c],c,""));return b?d.replace(/\t/g,b):d.replace(/\t|\n/g,"")},toObj:function(a){var b={},e=/function/i;if(1===a.nodeType){if(a.attributes.length){var d;for(d=0;d<a.attributes.length;d+=1)b["@"+a.attributes[d].nodeName]=(a.attributes[d].nodeValue||"").toString()}if(a.firstChild){var c=d=0,f=!1,g;for(g=a.firstChild;g;g=g.nextSibling)1===g.nodeType?f=!0:3===g.nodeType&&g.nodeValue.match(/[^ \f\n\r\t\v]/)?d+=1:4===g.nodeType&&(c+=1);if(f)if(2>d&&2>c)for(this.removeWhite(a),g=a.firstChild;g;g=
g.nextSibling)3===g.nodeType?b["#text"]=this.escape(g.nodeValue):4===g.nodeType?e.test(g.nodeValue)?b[g.nodeName]=[b[g.nodeName],g.nodeValue]:b["#cdata"]=this.escape(g.nodeValue):b[g.nodeName]?b[g.nodeName]instanceof Array?b[g.nodeName][b[g.nodeName].length]=this.toObj(g):b[g.nodeName]=[b[g.nodeName],this.toObj(g)]:b[g.nodeName]=this.toObj(g);else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(d)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):
(b=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===b?b="[]":"__EMPTY_STRING_"===b&&(b=""));else if(c)if(1<c)b=this.escape(this.innerXml(a));else for(g=a.firstChild;g;g=g.nextSibling)if(e.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}else b["#cdata"]=this.escape(g.nodeValue)}a.attributes.length||a.firstChild||(b=null)}else 9===a.nodeType?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,e,d){void 0===d&&(d=!0);var c=b?'"'+b+'"':
"",f="\t",g="\n";d||(g=f="");if("[]"===a)c+=b?":[]":"[]";else if(a instanceof Array){var m,h,k=[];h=0;for(m=a.length;h<m;h+=1)k[h]=this.toJson(a[h],"",e+f,d);c+=(b?":[":"[")+(1<k.length?g+e+f+k.join(","+g+e+f)+g+e:k.join(""))+"]"}else if(null===a)c+=(b&&":")+"null";else if("object"===typeof a){m=[];for(h in a)a.hasOwnProperty(h)&&(m[m.length]=this.toJson(a[h],h,e+f,d));c+=(b?":{":"{")+(1<m.length?g+e+f+m.join(","+g+e+f)+g+e:m.join(""))+"}"}else c="string"===typeof a?c+((b&&":")+'"'+a.replace(/\\/g,
"\\\\").replace(/\"/g,'\\"')+'"'):c+((b&&":")+'"'+a.toString()+'"');return c},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var e=function(a){var b="",f;if(1===a.nodeType){b+="<"+a.nodeName;for(f=0;f<a.attributes.length;f+=1)b+=" "+a.attributes[f].nodeName+'="'+(a.attributes[f].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(f=a.firstChild;f;f=f.nextSibling)b+=e(f);b+="</"+a.nodeName+">"}else b+="/>"}else 3===a.nodeType?b+=a.nodeValue:4===a.nodeType&&(b+="<![CDATA["+
a.nodeValue+"]]\x3e");return b};for(a=a.firstChild;a;a=a.nextSibling)b+=e(a)}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(3===b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var e=b.nextSibling;a.removeChild(b);b=e}else 1===b.nodeType&&this.removeWhite(b),b=b.nextSibling;return a}};
$.fn.toggleClick=function(){var a=arguments,b=a.length;return this.each(function(e,d){var c=0;$(d).click(function(){return a[c++%b].apply(this,arguments)})})};
(function(a){a.jqschedule={calendarid:"#calendar",eventid:"#event",calendarurl:"",locales:{dateFormat:"dd/MM/yyyy",bSave:"Save",bAdd:"Add",bDelete:"Delete",bCancel:"Cancel",bChange:"Change",bClose:"Close",bSearch:"Find",editCaption:"Edit event",addCaption:"Add new event",userCaption:"Change Calendar",searchCaption:"Advanced search"},searchCols:[],searchOpers:[],default_fields:"title allDay location className access start starttime end endtime description user_id".split(" "),_all_fields:[],diff:[],
diff_type:[],gotoDayEventView:function(b,e){a("#b_search_cal").trigger("click");var d=a.fullCalendar.parseDate(parseInt(b,10));a(a.jqschedule.calendarid).fullCalendar("gotoDate",d.getFullYear(),d.getMonth(),d.getDate());a(a.jqschedule.calendarid).fullCalendar("changeView","agendaDay")},setCustomEditFields:function(b,e){a.jqschedule.diff=[];a.jqschedule.diff_type=[];a.each(a("form",b)[0].elements,function(b,c){if(-1===a.inArray(c.id,a.jqschedule.default_fields)&&e.hasOwnProperty(c.id))if(a.jqschedule.diff.push(c.id),
a.jqschedule.diff_type.push(c.type),"checkbox"===c.type)"1"==e[c.id]?a("#"+c.id).prop("checked",!0):a("#"+c.id).prop("checked",!1);else if("select-multiple"===c.type){var f=e[c.id].split(","),g=0,m=f.length,h=a("#"+c.id+" option"),f=a.map(f,function(b){return a.trim(b)});for(g;g<m;g++)h.filter('[value="'+f[g]+'"]').prop("selected",!0)}else a("#"+c.id).val(e[c.id])})},eventEditDialog:function(b,e,d){var c=a(a.jqschedule.eventid);a("input,textarea,select",c).val("");b.allDay?a("#endtime, #starttime",
c).hide():a("#endtime, #starttime",c).show();a("#allDay",c).attr("checked",b.allDay);a("#title",c).val(b.title);setTimeout(function(){a("#description",c).val(b.description)},100);a("#location",c).val(b.location);a("#className",c).val(b.className);a("#access",c).val(b.access);a("#start",c).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",c).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",c).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));
a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",c).val(b.user_id);a.jqschedule.setCustomEditFields(c,b);e={};var f=a("#start",c).datepicker("option","dateFormat"),g;e[a.jqschedule.locales.bSave]=function(){var d=a.datepicker.parseDate(f,a("#start",c).val()),e=a("#starttime",c).val(),e=e?e.split(":"):["0","0"];d.setHours(parseInt(e[0],10),parseInt(e[1],10));(e=a.datepicker.parseDate(f,a("#end",c).val()))||(e=a.datepicker.parseDate(f,a("#start",c).val()));var k=
a("#endtime",c).val(),k=k?k.split(":"):["0","0"];e.setHours(parseInt(k[0],10),parseInt(k[1],10));0>e.getTime()-d.getTime()?alert("End time is little than start time"):(b.start=d,b._start=d,b.end=e,b._end=e,a("#allDay",c).is(":checked")?b.allDay=!0:b.allDay=!1,b.title=a("#title",c).val(),""===a.trim(b.title)?alert("Title is required"):(b.description=a("#description",c).val(),b.location=a("#location",c).val(),b.className=a("#className",c).val(),b.access=a("#access",c).val(),b.user_id=a("#user_id",c).val(),
g={},g.event_id=b.id,g.start=b.start.getTime()/1E3,g.end=b.end.getTime()/1E3,g.title=b.title,g.description=b.description,g.location=b.location,g.className=b.className,g.access=b.access,g.user_id=b.user_id,g.all_day=b.allDay?1:0,g.oper="editEvent",a.each(a.jqschedule.diff,function(d,e){var f;f="checkbox"===a.jqschedule.diff_type[d]?a("#"+e,c).is(":checked")?"1":"0":"select-multiple"===a.jqschedule.diff_type[d]?a("#"+e,c).val().join():a("#"+e,c).val();b[e]=g[e]=f}),a.ajax({url:a.jqschedule.calendarurl,
data:g,type:"post",success:function(d){a(a.jqschedule.calendarid).fullCalendar("updateEvent",b);c.dialog("close")}})))};e[a.jqschedule.locales.bDelete]=function(){g={};g.event_id=b.id;g.oper="removeEvent";a.ajax({url:a.jqschedule.calendarurl,data:g,type:"post"});a(a.jqschedule.calendarid).fullCalendar("removeEvents",b.id);c.dialog("close")};e[a.jqschedule.locales.bCancel]=function(){c.dialog("close")};c.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},
title:a.jqschedule.locales.editCaption,close:function(){c.dialog("destroy");c.hide();c=null},buttons:e}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004});return!1},eventViewDialog:function(b,e,d){var c=a(a.jqschedule.eventid);a("input,textarea,select",c).val("");b.allDay?a("#endtime, #starttime",c).hide():a("#endtime, #starttime",c).show();a("#allDay",c).attr("checked",b.allDay);a("#title",c).val(b.title);setTimeout(function(){a("#description",c).val(b.description)},100);a("#location",
c).val(b.location);a("#className",c).val(b.className);a("#access",c).val(b.access);a("#start",c).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",c).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",c).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",c).val(b.user_id);a.jqschedule.setCustomEditFields(c,b);e={};e[a.jqschedule.locales.bClose]=
function(){c.dialog("close")};c.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){c.dialog("destroy");c.hide();c=null},buttons:e}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004});return!1},eventAddDialog:function(b,e,d,c){var f=a(a.jqschedule.eventid);a("input,textarea,select",f).val("");e?a("#endtime, #starttime",f).hide():a("#endtime, #starttime",f).show();a("#allDay",f).attr("checked",
e);setTimeout(function(){a("#description",f).val("")},100);a("#start",f).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#starttime",f).val(a.fullCalendar.formatDate(b,"HH:mm"));a("#end",f).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#endtime",f).val(a.fullCalendar.formatDate(b,"HH:mm"));b=a("#switchuser").val();a.isArray(b)&&(b=b[0]);a("#user_id",f).val(b);a.jqschedule.diff=[];a.jqschedule.diff_type=[];a.each(a("form",f)[0].elements,function(b,c){-1===
a.inArray(c.id,a.jqschedule.default_fields)&&(a.jqschedule.diff.push(c.id),a.jqschedule.diff_type.push(c.type),"checkbox"===c.type&&a("#"+c.id).prop("checked",!1))});b={};var g=a("#start",f).datepicker("option","dateFormat"),m,h;b[a.jqschedule.locales.bAdd]=function(){h={};var b=a.datepicker.parseDate(g,a("#start",f).val()),c=a("#starttime",f).val(),c=c?c.split(":"):["0","0"];b.setHours(parseInt(c[0],10),parseInt(c[1],10));(c=a.datepicker.parseDate(g,a("#end",f).val()))||(c=a.datepicker.parseDate(g,
a("#start",f).val()));var d=a("#endtime").val(),d=d?d.split(":"):["0","0"];c.setHours(parseInt(d[0],10),parseInt(d[1],10));0>c.getTime()-b.getTime()?alert("End time is little than start time"):(h.start=b,h._start=b,h.end=c,h._end=c,a("#allDay",f).is(":checked")?h.allDay=!0:h.allDay=!1,h.title=a("#title",f).val(),""===a.trim(h.title)?alert("Title is required"):(h.description=a("#description",f).val(),h.location=a("#location",f).val(),h.className=a("#className",f).val(),h.access=a("#access",f).val(),
""===a.trim(h.className)||""===a.trim(h.access)?alert("Category or Access are requiered!"):(h.user_id=a("#user_id",f).val(),m={},m.start=h.start.getTime()/1E3,m.end=h.end.getTime()/1E3,m.title=h.title,m.description=h.description,m.location=h.location,m.className=h.className,m.access=h.access,m.user_id=h.user_id,m.all_day=h.allDay?1:0,m.oper="newEvent",a.each(a.jqschedule.diff,function(b,c){var d;d="checkbox"===a.jqschedule.diff_type[b]?a("#"+c,f).is(":checked")?"1":"0":"select-multiple"===a.jqschedule.diff_type[b]?
a("#"+c,f).val().join():a("#"+c,f).val();h[c]=m[c]=d}),a.ajax({url:a.jqschedule.calendarurl,data:m,dataType:"json",type:"POST",success:function(b,c){b.event_id&&(h.id=b.event_id,h._id=b.event_id,a(a.jqschedule.calendarid).fullCalendar("renderEvent",h,!1),f.dialog("close"))}}))))};b[a.jqschedule.locales.bCancel]=function(){f.dialog("close")};f.dialog({modal:!0,width:490,position:{at:"center bottom",of:a.jqschedule.calendarid},closeOnEscape:!1,title:a.jqschedule.locales.addCaption,close:function(){f.dialog("destroy");
f.hide();f=null},buttons:b}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004})},eventLoading:function(b){if(b){b=a(".calwrapper").width();var e=a(".calwrapper").height()+10;a("body").append('<div class="ui-widget-overlay" style="width:'+b+"px;height:"+e+'px;z-index: 1001;"></div>');a("#progresspar").show()}else a(".ui-widget-overlay").remove(),a("#progresspar").hide()},eventDrop:function(b,e,d,c,f){null==b.end&&(b.end=b.start);a.ajax({url:a.jqschedule.calendarurl,data:{oper:"moveEvent",
event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3,all_day:c?1:0},type:"post"})},eventResize:function(b,e,d,c,f,g,m){null==b.end&&(b.end=b.start);a.ajax({url:a.jqschedule.calendarurl,data:{oper:"resizeEvent",event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3},type:"post"})},eventRender:function(a,e,d){try{a.description&&e.tooltip({position:{my:"left bottom",at:"center top",offset:"-30 -10",of:e},content:function(c){return a.description}})}catch(c){}},changeCalendarUser:function(){var b=
a("#caluser");b.dialog({modal:!0,width:400,title:a.jqschedule.locales.userCaption,close:function(){b.dialog("destroy");b.hide();b=null},buttons:[{text:a.jqschedule.locales.bChange,click:function(){var e=a("#switchuser",this).val();a.ajax({url:a.jqschedule.calendarurl,data:{_user_id:e,oper:"switchUser"},type:"post",success:function(b,c){a(a.jqschedule.calendarid).fullCalendar("refetchEvents");a("#common_search").val("");a(".fnd-results").html("");a("#search_table").empty();var e=a("#switchuser option:selected");
if(1>=e.length)a("#cal_user").html("<li>"+e.text()+"</li>");else{var g="";a.each(e,function(){g+="<li>"+a(this).text()+"</li>"});a("#cal_user").html(g)}}});b.dialog("close")}},{text:a.jqschedule.locales.bCancel,click:function(){b.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004});return!1},printEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=a("#common_search").val(),e="simple";if(""===b){var e="complex",d=a("#search_cal");
if(d){d=d.jqFilter("filterData");if(!d.rules.length)return!1;try{b=xmlJsonClass.toJson(d,"","",!1)}catch(c){try{b=JSON.stringify(d)}catch(f){}}}}window.location=a.jqschedule.calendarurl+"?oper=printEvents&stype="+e+"&search=true&svalue="+b}else e=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),b=e.start.getTime()/1E3,e=e.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=printEvents&start="+b+"&end="+e;return!1},exportEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=
a("#common_search").val(),e="simple";if(""===b){var e="complex",d=a("#search_cal");if(d){d=d.jqFilter("filterData");if(!d.rules.length)return!1;try{b=xmlJsonClass.toJson(d,"","",!1)}catch(c){try{b=JSON.stringify(d)}catch(f){}}}}window.location=a.jqschedule.calendarurl+"?oper=exportEvents&stype="+e+"&search=true&svalue="+b}else e=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),b=e.start.getTime()/1E3,e=e.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=exportEvents&start="+
b+"&end="+e;return!1},showSearch:function(){a("#common_search").val()&&(a("#common_search").val(""),a("#b_common_search").trigger("click"));a(this).addClass("ui-state-active");a(".fc-view-agendaWeek, .fc-view-agendaDay, .fc-view-basicDay, .fc-view-basickWeek, .fc-view-month, .fc-view-year").hide();a(".fc-view-search").show();a("#common_search").focus()},hideSearch:function(){a(this).removeClass("ui-state-active");var b=a(a.jqschedule.calendarid).fullCalendar("getView").name;a(".fc-view-search").hide();
a(".fc-view-"+b).show()},_filSearchTable:function(b,e){a(e).empty();if(b&&b.length){a(".fnd-results").html(b.length);var d="",c=0;a.jqschedule._all_fields=[];a.each(b,function(){0===c&&(a.jqschedule._all_fields=a.map(this,function(a,b){return b}));var b=a.fullCalendar.parseDate(this.start),e=a.fullCalendar.parseDate(this.end),m=a.fullCalendar.formatDate(b,"HH:mm"),h=a.fullCalendar.formatDate(e,"HH:mm"),m=this.allDay?"all day":m+" - "+h,b=a.fullCalendar.formatDate(b,"ddd  dd MMM yyyy"),e=a.fullCalendar.formatDate(e,
"ddd  dd MMM yyyy");b!==e&&(m+=" "+e);d+="<tr id='"+this.id+"'><th class='ui-event-cell ui-widget-content'><a href=\"javascript:jQuery.jqschedule.gotoDayEventView('"+this.start+"');\">"+b+"</a></th><td class='ui-event-time ui-widget-content'>"+m+"</td><td class='ui-event-title ui-widget-content'><a href=\"javascript:jQuery.jqschedule.editFromSearch('"+this.id+"');\" class='' style='border: 0px none;text-decoration:  underline;'>"+this.title+"</a></td>";d+="<td class='source' style='display:none;'>";
d+=a.map(this,function(a,b){return a}).join("~`");d+="</td>";d+="</tr>";c++});a(e).append(d)}},doSimpleSearch:function(){var b=a("#common_search").val();b?a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,stype:"simple",svalue:b,oper:"getEvent"},dataType:"json",type:"POST",success:function(b,d){a.jqschedule._filSearchTable(b,"#search_table")}}):(a(".fnd-results").html(""),a("#search_table").empty())},buildLocalSearch:function(){var b,e;a("label",a.jqschedule.eventid).each(function(d){b={};b.name=
a(this).attr("for");b.label=a(this).html();"className"===b.name||"access"===b.name?(b.inputtype="select",e={},a("#"+b.name+" option",a.jqschedule.eventid).each(function(){e[a(this).val()]=a(this).text()}),b.searchoptions={value:e}):"allDay"===b.name?(b.inputtype="select",e={1:"Yes",0:"No"},b.searchoptions={value:e}):"start"===b.name||"end"===b.name?(b.searchtype="date",b.searchoptions={size:20,sopt:["eq","gt","ge","lt","le"],dataInit:function(b){a(b).datetimepicker()}}):b.searchoptions={size:20};
a.jqschedule.searchCols[d]=b})},advancedSearchDlg:function(){a("#search_cal").jqFilter({columns:a.jqschedule.searchCols,filter:{groupOp:"AND",rules:[{field:a.jqschedule.searchCols[0].name,op:"eq",data:""}]},_gridsopt:a.jqschedule.searchOpers});a("#search_cal").dialog({modal:!0,width:"auto",autoOpen:!1,title:a.jqschedule.locales.searchCaption,close:function(){},buttons:[{text:a.jqschedule.locales.bSearch,click:function(){var b=a("#search_cal"),e,d=b.jqFilter("filterData");if(d.rules.length){try{e=
xmlJsonClass.toJson(d,"","",!1)}catch(c){try{e=JSON.stringify(d)}catch(f){}}e&&a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,stype:"complex",svalue:e,oper:"getEvent"},dataType:"json",type:"POST",success:function(b,d){a.jqschedule._filSearchTable(b,"#search_table")}});b.dialog("close")}}},{text:a.jqschedule.locales.bClose,click:function(){a("#search_cal").dialog("close")}}]});a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004})},editFromSearch:function(b){var e=
a("tr#"+b+" td.source").html().split("~`"),d={};a.each(a.jqschedule._all_fields,function(a,b){if("start"===b||"end"===b)e[a]=new Date(1E3*parseFloat(e[a]));"allDay"===b&&(e[a]="1"==e[a]?!0:!1);d[b]=e[a]});a.jqschedule.eventViewDialog(d)},openDaySearchDlg:function(b,e,d){var c=b.getTime()/1E3;b.setHours(23);b.setMinutes(23);var f=b.getTime()/1E3,g=a("#day_dialog");g.dialog({modal:!0,width:450,close:function(){g.dialog("destroy");g.hide();g=null},open:function(b,d){a("#day_table").empty();a.ajax({url:a.jqschedule.calendarurl,
data:{oper:"getEvent",start:c,end:f},dataType:"json",type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#day_table")}})},buttons:[{text:a.jqschedule.locales.bClose,click:function(){g.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004})},eventsFunc:function(b,e,d){a.ajax({url:a.jqschedule.calendarurl,dataType:"json",type:"POST",data:{oper:"getEvent",start:b.getTime()/1E3,end:e.getTime()/1E3},success:function(a,b){d(a)}})},processScript:function(){a("#datepicker").datepicker({dateFormat:"yy-mm-dd",
onSelect:function(b,e){var d=b.split("-");a(a.jqschedule.calendarid).fullCalendar("gotoDate",parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}});a("#start, #end",a.jqschedule.eventid).datepicker();a("#allDay",a.jqschedule.eventid).click(function(){this.checked?a("#endtime, #starttime",a.jqschedule.eventid).val("00:00").hide():a("#endtime, #starttime",a.jqschedule.eventid).show()});a(".custbutton").height(a("table.fc-header").height());a("#b_user_change").click(jQuery.jqschedule.changeCalendarUser);
a("#b_export_ical").click(jQuery.jqschedule.exportEvents);a("#b_print_cal").click(jQuery.jqschedule.printEvents);a(".fc-content",a.jqschedule.calendarid).append(a(".fc-view-search"));a("#b_search_cal").toggleClick(jQuery.jqschedule.showSearch,jQuery.jqschedule.hideSearch);a("#b_common_search").click(jQuery.jqschedule.doSimpleSearch);a("#b_adv_search").click(function(){a("#search_cal").dialog("open");return!1});a(".jq-button").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});
a.jqschedule.buildLocalSearch();a.jqschedule.advancedSearchDlg()}}})(jQuery);
